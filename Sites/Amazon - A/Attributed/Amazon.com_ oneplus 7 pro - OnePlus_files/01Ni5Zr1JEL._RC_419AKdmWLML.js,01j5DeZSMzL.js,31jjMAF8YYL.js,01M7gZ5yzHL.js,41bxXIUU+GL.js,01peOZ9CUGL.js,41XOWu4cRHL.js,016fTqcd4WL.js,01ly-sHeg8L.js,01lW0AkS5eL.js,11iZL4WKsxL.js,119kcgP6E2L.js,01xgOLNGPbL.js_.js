(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,c=e?e("LoomSponsoredProductsAssets",""):d;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,d,e){b.when("A","rush-framework").register("sp-sponsored-result",function(c,b){function e(a){a=a.elem();a=c.$(a).find(".s-image");if(0<a.length){a=(a=a.is(":visible"))?0:1;var b=f("sp_hidden")||0;f("sp_hidden",b+a);a=f("sp_delivered")||0;f("sp_delivered",a+1)}}var f=d.ue&&d.ue.count;f&&
b.registerComponent("sp-sponsored-result","sp-sponsored-result",e)})});
/* ******** */
(function(k){var q=window.AmazonUIPageJS||window.P,x=q._namespace||q.attributeErrors,d=x?x("QuantitySelectorAssets",""):q;d.guardFatal?d.guardFatal(k)(d,window):d.execute(function(){k(d,window)})})(function(k,q,x){k.when("A","QuantitySelectorConstants","a-util").execute("qsAUIDeps-main",function(d,a,c){function h(){b&&b.enableCheckoutCompatibility&&g()}function g(){d.$('span[id^\x3d"'+a.getQsWidgetSummaryPriceId("")+'"][data-a-color\x3d"price"]').each(function(){d.$(this)[0].style.color="#B12704"});
d.$('span[id^\x3d"'+a.getQsWidgetButtonId("")+'"]').each(function(){var a=d.$(this);a.hasClass("a-button-dropdown")&&a.hasClass("a-button-small")&&(a=a.attr("id"),d.$('button[id^\x3d"'+a+'-announce"]').each(function(){d.$(this)[0].style.paddingRight="17px"}))})}function l(a){function b(a){return d.$(a+"-announce")}return function(a){return new b(a)}}function p(b){var f=function(a,f){var h=a+"-extradata",c=b.state(h);if(null==f)return h=b.state(a),f=d.$.extend({},h,c);c=d.$.extend({},c,f);b.state(h,
c)};f.parse=function(){for(var f=d.$('script[type\x3d"a-state"]'),h=a.getQsWidgetConfigurationId(""),g=0;g<f.length;g++){var p=f[g].getAttribute("data-a-state");if((p=c.parseJSON(p).key)&&p.substring(0,h.length)==h){var l=b.state(p);l&&l.id||(l=c.parseJSON(f[g].innerHTML),b.state(p,l))}}};return{state:f}}var b;k.when("QuantitySelectorAUIDeps_AState","QuantitySelectorAUIDeps_AButton").execute("qsAUIDeps-register",function(a,b){k.register("QuantitySelectorAUIDeps",function(){return{aUtil:c,aState:a.object,
aButton:b.object,initialize:h}})});(function(){for(var h=d.$('script[type\x3d"a-state"]'),f=a.getQsWidgetGlobalConfigurationId(),e=0;e<h.length;e++){var g=h[e].getAttribute("data-a-state");if((g=c.parseJSON(g).key)&&g.substring(0,f.length)==f){b=c.parseJSON(h[e].innerHTML);break}}})();(function(){b&&b.enableCheckoutCompatibility?(k.when("a-state").execute("qsAUIDeps-checkout-compat-a-state-register",function(a){k.register("QuantitySelectorAUIDeps_AState",function(){return{object:p(a)}})}),k.when("a-buttons").execute("qsAUIDeps-checkout-compat-a-button-register",
function(a){k.register("QuantitySelectorAUIDeps_AButton",function(){return{object:l(a)}})}),d.on("checkout:afterReload",function(){d.trigger(a.getQsWidgetEventInitialize(),!1)})):(k.when("a-state").execute("qsAUIDeps-a-state-register",function(a){k.register("QuantitySelectorAUIDeps_AState",function(){return{object:a}})}),k.when("a-button").execute("qsAUIDeps-a-button-register",function(a){k.register("QuantitySelectorAUIDeps_AButton",function(){return{object:a}})}));d.on("a:pageUpdate ready",function(){d.trigger(a.getQsWidgetEventInitialize(),
!1)})})();h()});"use strict";k.when("A").register("QuantitySelectorConstants",function(d){var a={height:303,heightWithAtc:355,disclaimerTextAdjustment:41,disclaimerTextAdjustmentWithAtc:40},c={scrollEventStop:200,constant:19,increment:45,adjustment:20};return{getQsWidgetEventInitialize:function(){return"quantity-selector-widget:initialize"},getQsWidgetEventTriggerAction:function(){return"quantity-selector-widget:triggerAction"},getQsWidgetEventConfigureList:function(){return"quantity-selector-widget:configure:list"},
getQsWidgetEventConfigureEnable:function(){return"quantity-selector-widget:configure:enable"},getQsWidgetEventConfigureDisable:function(){return"quantity-selector-widget:configure:disable"},getQsWidgetEventConfigureReset:function(){return"quantity-selector-widget:configure:reset"},getQsWidgetEventConfigureGet:function(){return"quantity-selector-widget:configure:get"},getQsWidgetEventConfigureSet:function(){return"quantity-selector-widget:configure:set"},getQsWidgetEventSelectId:function(){return"quantity-selector-widget:selectId"},
getQsWidgetEventSelectQuantity:function(){return"quantity-selector-widget:selectQuantity"},getQsWidgetEventAction:function(a){return"quantity-selector-widget:action:"+a},getQsWidgetAuiInputTextWrapperClass:function(){return"a-input-text-wrapper"},getQsWidgetActivateDebounce:function(){return 100},getQsWidgetInitialViewDropdown:function(){return"dropdown"},getQsWidgetActionTriggerOnConfirmation:function(){return"on_confirmation"},getQsWidgetActionTriggerOnSelect:function(){return"on_select"},getQsWidgetGlobalConfigurationId:function(){return"qs-widget-global-configuration"},
getQsWidgetConfigurationId:function(a){return"qs-widget-configuration-"+a},getQsWidgetStateScriptSelectorQuery:function(a){return"script[data-a-state*\x3d'qs-widget-configuration-"+a+"']"},getQsWidgetContainerId:function(a){return"qs-widget-container-"+a},getQsWidgetSpinnerId:function(a){return"qs-widget-spinner-"+a},getQsWidgetButtonContainerId:function(a){return"qs-widget-button-container-"+a},getQsWidgetButtonId:function(a){return"qs-widget-button-"+a},getQsWidgetDropdownContainerId:function(a){return"qs-widget-dropdown-container-"+
a},getQsWidgetDropdownId:function(a){return"qs-widget-dropdown-"+a},getQsWidgetDropdownViewId:function(a){return"qs-widget-dropdown-view-"+a},getQsWidgetDropdownItemId:function(a,c){return"qs-widget-dropdown-item-"+c+"-"+a},getQsWidgetDropdownItemAriaId:function(a,c){return"qs-widget-dropdown-item-aria-"+c+"-"+a},getQsWidgetDropdownItemQuantitySuffixId:function(a,c){return"qs-widget-dropdown-item-quantitySuffix-"+c+"-"+a},getQsWidgetDropdownUnorderedListId:function(a){return"qs-widget-dropdown-unorderedlist-"+
a},getQsWidgetTextInputId:function(a){return"qs-widget-text-input-"+a},getQsWidgetTextInputContainerId:function(a){return"qs-widget-text-input-container-"+a},getQsWidgetTextInputUpdateButtonId:function(a){return"qs-widget-text-input-updatelink-"+a},getQsWidgetTextInputUpdateButtonContainerId:function(a){return"qs-widget-text-input-updatelink-container-"+a},getQsWidgetTextInputUpdateButtonDecl:function(){return"qs-widget-text-input-updatelink-decl"},getQsWidgetTextInputDecl:function(){return"qs-widget-text-input-decl"},
getQsWidgetQuantityContainerId:function(a){return"qs-widget-quantity-container-"+a},getQsWidgetQuantityId:function(a){return"qs-widget-quantity-"+a},getQsWidgetQuantitySuffixId:function(a){return"qs-widget-quantity-suffix-"+a},getQsWidgetInitialViewSuffixId:function(a){return"qs-widget-initialView-suffix-"+a},getQsWidgetSummaryId:function(){return"qs-widget-summary-"},getQsWidgetSummaryPriceId:function(a){return"qs-widget-summary-price-"+a},getQsWidgetSummaryPriceSymbolId:function(a){return"qs-widget-summary-price-symbol-"+
a},getQsWidgetSummaryPriceWholeId:function(a){return"qs-widget-summary-price-whole-"+a},getQsWidgetSummaryPriceFractionId:function(a){return"qs-widget-summary-price-fraction-"+a},getQsWidgetSummaryPriceDecimalId:function(a){return"qs-widget-summary-price-decimal-"+a},getQsWidgetSummaryAtcId:function(a){return"qs-widget-summary-atc-"+a},getQsWidgetFooterPriceContainerId:function(a){return"qs-widget-footer-price-container-"+a},getQsWidgetFooterPriceSymbolId:function(a){return"qs-widget-footer-price-symbol-"+
a},getQsWidgetFooterPriceWholeId:function(a){return"qs-widget-footer-price-whole-"+a},getQsWidgetFooterPriceFractionId:function(a){return"qs-widget-footer-price-fraction-"+a},getQsWidgetFooterPriceDecimalId:function(a){return"qs-widget-footer-price-decimal-"+a},getQsWidgetFooterQuantitySuffixContainerId:function(a){return"qs-widget-footer-quantitySuffix-container-"+a},getQsWidgetFooterQuantitySuffixId:function(a){return"qs-widget-footer-quantitySuffix-"+a},getQsWidgetButtonDecl:function(){return"qs-widget-button-decl"},
getQsWidgetSummaryAtcDecl:function(){return"qs-widget-summary-atc-decl"},getQsWidgetQuantityChangelinkId:function(a){return"qs-widget-quantity-changelink-"+a},getQsWidgetQuantityChangelinkDecl:function(){return"qs-widget-quantity-changelink-decl"},getQsWidgetDropdownItemDecl:function(){return"qs-widget-dropdown-item-decl"},getQsWidgetDropdownDecl:function(){return"qs-widget-dropdown-decl"},getQsWidgetDropdownScrollMetricThreshold:function(){return 20},getQsWidgetBottomSheetId:function(a){return"qs-widget-bottom-sheet-"+
a},getQsWidgetBottomSheetContainerId:function(a){return"qs-widget-bottom-sheet-container-"+a},getQsWidgetBottomSheetQuantitySuffixId:function(a){return"qs-widget-bottom-sheet-quantitySuffix-"+a},getQsWidgetBottomSheetHeightConfig:function(){return a},getQsWidgetBottomSheetDropDownScrollFactor:function(){return c}}});"use strict";k.when("A","QuantitySelectorState","QuantitySelectorAUIDeps").register("QuantitySelectorMetadata",function(d,a,c){function h(d){return(d=a.getQsWidgetConfiguration(d).metadata)?
c.aUtil.parseJSON(d):null}return{isWeblabEnabled:function(a,c,d){a:{if((a=h(a))&&a.weblabs)for(var b=0;b<a.weblabs.length;b++){var n=a.weblabs[b];if(n.weblabName==c){c=n.treatment;break a}}c=null}return null==c?d:"T1"==c?!0:!1},getMetaConfiguration:function(a,c){return(a=h(a))?a[c]:null}}});"use strict";k.when("A").register("QuantitySelectorMetrics",function(d){function a(a){q.ue&&q.ue.count&&a&&ue.count(a,(ue.count(a)||0)+1)}return{incrementInitializeCount:function(c,d){var g="QuantitySelector-Initialize",
g=c?g+"-Success-Count":g+"-Failed-Count";a(d?g+":mobile":g+":desktop")},incrementInvalidIdCount:function(){a("QuantitySelector-InvalidID")},incrementTriggerActionCount:function(c,d,g){c="QuantitySelector-TriggerAction-"+c;c=d?c+"-Success-Count":c+"-Failed-Count";a(g?c+":mobile":c+":desktop")},incrementChangeLinkCount:function(){a("QuantitySelector-ChangeLink-Count")},incrementShowPopup:function(c){var d="QuantitySelector-ShowPopup-Count";a(c?d+":mobile":d+":desktop")},logCsm:function(a,d){}}});"use strict";
k.when("A","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps").register("QuantitySelectorState",function(d,a,c,h){function g(c){var b=h.aState.state(a.getQsWidgetConfigurationId(c));b&&b.id||(h.aState.state.parse(),b=h.aState.state(a.getQsWidgetConfigurationId(c)));return b}function l(){for(var c=[],b=d.$('script[type\x3d"a-state"]'),n=a.getQsWidgetConfigurationId(""),f=0;f<b.length;f++){var e=b[f].getAttribute("data-a-state");(e=h.aUtil.parseJSON(e).key)&&e.substring(0,
n.length)==n&&(e=e.substring(n.length),c.push(e))}return c}d.on(a.getQsWidgetEventTriggerAction(),function(p,b,n){var f=g(p),e=f.selectedId,t=f.selectedQuantity;b||(b=f.actionId);var u="mobile"==f.viewType.toLowerCase(),r=!1;if(e)for(var l=0;l<f.qsItems.length;l++)if(f.qsItems[l].id==e){var r=h.aUtil.parseJSON(f.staticData),k=h.aUtil.parseJSON(f.qsItems[l].data),r=d.$.extend({qsUID:p,tunneledData:n},r,k);d.trigger(a.getQsWidgetEventAction(b),r);c.incrementTriggerActionCount(b,!0,u);r=!0}t&&(r=h.aUtil.parseJSON(f.staticData),
r=d.$.extend({qsUID:p,tunneledData:n},r,{quantity:t}),d.trigger(a.getQsWidgetEventAction(b),r),c.incrementTriggerActionCount(b,!0,u),r=!0);r||c.incrementTriggerActionCount(b,!1,u)});d.on(a.getQsWidgetEventConfigureList(),function(a){"function"===typeof a&&a(l())});d.on(a.getQsWidgetEventConfigureGet(),function(a,b){a=g(a);"function"===typeof b&&b(a)});d.on(a.getQsWidgetEventConfigureSet(),function(c,b){h.aState.state.replace(a.getQsWidgetConfigurationId(c),b);d.trigger(a.getQsWidgetEventInitialize(),
!0,c)});return{getQsWidgetConfiguration:g,saveOriginalSettings:function(c){var b=a.getQsWidgetConfigurationId(c)+"-original",d=h.aState.state(b);d&&d.id||(c=g(c),h.aState.state(b,c))},loadOriginalSettings:function(c){var b=a.getQsWidgetConfigurationId(c)+"-original";(b=h.aState.state(b))&&b.id&&h.aState.state.replace(a.getQsWidgetConfigurationId(c),b)},setEnable:function(c,b){b={enable:b};h.aState.state(a.getQsWidgetConfigurationId(c),b)},setInitialized:function(c){h.aState.state(a.getQsWidgetConfigurationId(c),
{initialized:!0})},setSelectedId:function(c,b){b={selectedId:b,selectedQuantity:null};h.aState.state(a.getQsWidgetConfigurationId(c),b)},setSelectedQuantity:function(c,b){b={selectedId:null,selectedQuantity:b};h.aState.state(a.getQsWidgetConfigurationId(c),b)},setData:function(c,b){h.aState.state(a.getQsWidgetConfigurationId(c),b)},getQsUIDs:l}});"use strict";k.when("A","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorAUIDeps").register("QuantitySelectorUtils",function(d,a,c,h){function g(a){return"true"==
a||1==a?!0:!1}function l(m){return"mobile"==a.getQsWidgetConfiguration(m).viewType.toLowerCase()?!0:!1}function k(m){m=a.getQsWidgetConfiguration(m);return g(m.showConfirmationView)?!0:!1}function b(m){m=a.getQsWidgetConfiguration(m);return g(m.allowZeroQuantity)?!0:!1}function n(a){var b=d.$("#"+c.getQsWidgetQuantityChangelinkId(a));a=d.$("#"+c.getQsWidgetTextInputUpdateButtonId(a));b.attr("draggable","false");a.attr("draggable","false")}function f(a){return d.$("#"+c.getQsWidgetContainerId(a))}
function e(a){return h.aButton("#"+c.getQsWidgetButtonId(a))}function t(a){return d.$("#"+c.getQsWidgetDropdownContainerId(a))}function u(a){return d.$("#"+c.getQsWidgetDropdownViewId(a))}function r(a){return d.$("#"+c.getQsWidgetDropdownUnorderedListId(a))}function v(a){return d.$("#"+c.getQsWidgetTextInputId(a))}function y(m,b){m=a.getQsWidgetConfiguration(m);for(var c=0;c<m.qsItems.length;c++)if(m.qsItems[c].id==b)return m.qsItems[c]}function q(m){m=a.getQsWidgetConfiguration(m);if(m.qsItems)for(var b=
0;b<m.qsItems.length;b++)if(g(m.qsItems[b].isSelected))return m.qsItems[b].id}function z(m){return a.getQsWidgetConfiguration(m).selectedQuantity}function A(a,c){return(b(a)?/^(([0-9]\d{0,2}))$/:/^(([1-9]\d{0,2})|(0[1-9]\d?)|(00[1-9]))$/).test(c)}var w=[];return{isInitialized:function(m){return a.getQsWidgetConfiguration(m).initialized},isMobile:l,isQsWidgetEnabled:function(m){m=a.getQsWidgetConfiguration(m);return m.hasOwnProperty("enable")?g(m.enable):!0},isConfirmationViewEnabled:k,isAllowZeroQuantityEnabled:b,
isInitialViewDropdown:function(m){return a.getQsWidgetConfiguration(m).initialView.toLowerCase()==c.getQsWidgetInitialViewDropdown()?!0:!1},getQsWidgetBottomSheetConfig:function(m){var b=a.getQsWidgetConfiguration(m),f=c.getQsWidgetBottomSheetHeightConfig(),e=0;b.summaryDisclaimerText||(e=k(m)?f.disclaimerTextAdjustmentWithAtc:f.disclaimerTextAdjustment);return k(m)?{closeMessage:b.bottomSheetCancelText,height:f.heightWithAtc-e}:{closeMessage:b.bottomSheetDoneText,height:f.height-e}},isActionTriggerOnConfirmation:function(m){return a.getQsWidgetConfiguration(m).actionTrigger.toLowerCase()==
c.getQsWidgetActionTriggerOnConfirmation()?!0:!1},isActionTriggerOnSelect:function(m){return a.getQsWidgetConfiguration(m).actionTrigger.toLowerCase()==c.getQsWidgetActionTriggerOnSelect()?!0:!1},isTextInputRequired:function(a,b){a=y(a,b).quantityText;return"+"==a.substr(a.length-1)?{result:!0,initialQuantityText:a.substr(0,a.length-1)}:{result:!1}},initializeWidget:function(a){var b=q(a);b?d.trigger(c.getQsWidgetEventSelectId(),a,b,!1,function(){n(a)}):(b=z(a))&&d.trigger(c.getQsWidgetEventSelectQuantity(),
a,b,!1,function(){n(a)});var b=f(a),e=d.$("#"+c.getQsWidgetSpinnerId(a));e.removeClass("qs-widget-visible");e.addClass("qs-widget-hidden");b.removeClass("qs-widget-hidden")},activateWidget:function(a){var b=w.indexOf(a);-1<b&&w.splice(b,1);setTimeout(function(){w.push(a)},c.getQsWidgetActivateDebounce())},deactivateWidget:function(a){a=w.indexOf(a);-1<a&&w.splice(a,1)},getActivatedQsWidgets:function(){return w},hideComponent:function(a,b){a.addClass("aok-hidden")},showComponent:function(a){a.removeClass("aok-hidden")},
isComponentVisible:function(a){return!a.hasClass("aok-hidden")},setComponentVisibility:function(a,b){b?a.css("visibility","visible"):a.css("visibility","hidden")},setHtml:function(a,b){a.html(b)},setQsWidgetContainerMinWidthAndHeight:function(a){a=f(a);a.css("min-width",a.width()+"px");a.css("min-height",a.height()+"px")},resetQsWidgetContainerMinWidthAndHeight:function(a){a=f(a);a.css("min-width","0px");a.css("min-height","0px")},enableQsWidget:function(b){var c=e(b),f=v(b);c.enable();f.removeClass("a-form-disabled");
f.addClass("a-form-normal");f.removeAttr("disabled");a.setEnable(b,!0)},disableQsWidget:function(b){var c=e(b),f=v(b);c.disable();f.removeClass("a-form-normal");f.addClass("a-form-disabled");f.attr("disabled","disabled");a.setEnable(b,!1)},popOutDropDownContainer:function(a){var b=f(a).offset();a=t(a);a.appendTo(document.body);a.css({left:b.left,top:b.top})},getQsWidgetButtonContainer:function(a){return d.$("#"+c.getQsWidgetButtonContainerId(a))},getQsWidgetButtonAsComponent:e,getQsWidgetButton:function(a){return d.$("#"+
c.getQsWidgetButtonId(a)+"-announce")},getQsWidgetDropdownContainer:t,getQsWidgetDropdownElement:function(a){return d.$("#"+c.getQsWidgetDropdownId(a))},getQsWidgetDropdownViewSelector:u,getQsWidgetDropdownUnorderedListElement:r,getQsWidgetDropdownItemElement:function(a,b){return d.$("#"+c.getQsWidgetDropdownItemAriaId(a,b))},getQsWidgetTextInputContainer:function(a){return d.$("#"+c.getQsWidgetTextInputContainerId(a))},getQsWidgetTextInputElement:v,getQsWidgetTextInputUpdateButtonContainer:function(a){return d.$("#"+
c.getQsWidgetTextInputUpdateButtonContainerId(a))},getQsWidgetQuantityContainer:function(a){return d.$("#"+c.getQsWidgetQuantityContainerId(a))},getQsWidgetQuantityElement:function(a){return d.$("#"+c.getQsWidgetQuantityId(a))},getQsWidgetQuantitySuffixElement:function(a){return d.$("#"+c.getQsWidgetQuantitySuffixId(a))},getQsWidgetInitialViewSuffixElement:function(a){return d.$("#"+c.getQsWidgetInitialViewSuffixId(a))},getQsWidgetSummaryAtcButton:function(a){return d.$("#"+c.getQsWidgetSummaryAtcId(a))},
getQsWidgetSummaryContainer:function(a){return d.$("#"+c.getQsWidgetSummaryPriceId(a))},getQsWidgetSummaryPriceSymbolElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceSymbolId(a))},getQsWidgetSummaryPriceWholeElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceWholeId(a))},getQsWidgetSummaryPriceFractionElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceFractionId(a))},getQsWidgetSummaryPriceDecimalElement:function(a){return d.$("#"+c.getQsWidgetSummaryPriceDecimalId(a))},
getQsWidgetFooterPriceContainer:function(a){return d.$("#"+c.getQsWidgetFooterPriceContainerId(a))},getQsWidgetFooterPriceSymbolElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceSymbolId(a))},getQsWidgetFooterPriceWholeElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceWholeId(a))},getQsWidgetFooterPriceFractionElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceFractionId(a))},getQsWidgetFooterPriceDecimalElement:function(a){return d.$("#"+c.getQsWidgetFooterPriceDecimalId(a))},
getQsWidgetFooterQuantitySuffixContainer:function(a){return d.$("#"+c.getQsWidgetFooterQuantitySuffixContainerId(a))},getQsWidgetFooterQuantitySuffixElement:function(a){return d.$("#"+c.getQsWidgetFooterQuantitySuffixId(a))},getQsWidgetBottomSheetQuantitySuffixElement:function(a){return d.$("#"+c.getQsWidgetBottomSheetQuantitySuffixId(a))},getQsItem:y,getSelectedQsItemId:q,getSelectedQuantity:z,getQsItemFromQuantityText:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return null;for(var f=
0;f<b.length;f++)if(c.toLowerCase()==b[f].quantityText.toLowerCase()||parseFloat(c)==parseFloat(b[f].quantityText))return b[f]},getFocusedQsItemIdInBottomSheet:function(b){var f=u(b).scrollTop(),e=c.getQsWidgetBottomSheetDropDownScrollFactor();f=parseInt((f-e.constant+e.adjustment)/e.increment);b=a.getQsWidgetConfiguration(b).qsItems;b=0>f?b[0].id:f>=b.length?b[b.length-1].id:b[f].id;return b},getIndexFromIdInBottomSheet:function(b,c){b=a.getQsWidgetConfiguration(b).qsItems;if(!b)return 0;for(var f=
0;f<b.length;f++)if(c==b[f].id)return f},saveQsWidgetDropdownTopPosition:function(b){var c=r(b);c&&(c=c.position().top,a.setData(b,{scrollTop:c}));return!1},setQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:-65536})},clearQsWidgetDropdownScrolled:function(b){a.setData(b,{scrollTop:c.getQsWidgetDropdownScrollMetricThreshold()})},isQsWidgetDropdownScrolled:function(b){var f=r(b);return f?(f=f.position().top,(b=a.getQsWidgetConfiguration(b).scrollTop)?Math.abs(f-b)>c.getQsWidgetDropdownScrollMetricThreshold():
!1):!1},generateQsDropdownDOM:function(b){var f="",e=a.getQsWidgetConfiguration(b),d=e.qsItems,e=e.selectedId,t=l(b);if(!d)return"";for(var n=0;n<d.length;n++){var g,h=d[n].id,u=d[n].quantityText;if(t){g=b;var r=c.getQsWidgetDropdownItemId(g,h),k=c.getQsWidgetDropdownItemAriaId(g,h),p=c.getQsWidgetDropdownItemDecl();g='\x3cspan class\x3d"a-declarative" data-action\x3d"'+p+'" data-'+p+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+g+"\x26quot;,\x26quot;id\x26quot;:"+h+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+
r+'" aria-labelledby\x3d"'+k+'" class\x3d"qs-widget-dropdown-li"\x3e'+u+"\x3c/li\x3e\x3c/span\x3e"}else{g=b;var v=d[n].quantityTextAbbreviatedSuffix,r=d[n].id==e,k=c.getQsWidgetDropdownItemId(g,h),p=c.getQsWidgetDropdownItemAriaId(g,h),q=c.getQsWidgetDropdownItemQuantitySuffixId(g,h),y=c.getQsWidgetDropdownDecl(g),w="";v&&(w='\x3cspan id\x3d"'+q+'" class\x3d"a-size-mini a-color-tertiary"\x3e'+v+"\x3c/span\x3e");v="false";q="qs-widget-dropdown-link";r&&(v="true",q+=" qs-widget-dropdown-link-active aok-block aok-nowrap");
g='\x3cspan class\x3d"a-declarative" data-action\x3d"'+y+'" data-'+y+'\x3d"{\x26quot;qsUID\x26quot;:\x26quot;'+g+"\x26quot;,\x26quot;id\x26quot;:"+h+'}"\x3e\x3cli tabindex\x3d"-1" role\x3d"option" id\x3d"'+k+'" aria-labelledby\x3d"'+p+'" aria-checked\x3d"'+v+'" class\x3d"qs-widget-dropdown-item"\x3e\x3ca tabindex\x3d"0" href\x3d"javascript:void(0)" draggable\x3d"false" id\x3d"'+p+'" class\x3d"'+q+'"\x3e'+u+"\x26nbsp;\x26nbsp;"+w+"\x3c/a\x3e\x3c/li\x3e\x3c/span\x3e"}f+=g}return f},isQsWidgetTextInputValid:A,
validateQsWidgetTextInput:function(a){var b=v(a),f=b.val();a=A(a,f);var e=b.parent().hasClass(c.getQsWidgetAuiInputTextWrapperClass())?b.parent():b;if(a)return b.val(f.replace(/^0{2,}$/,"0").replace(/^0+(\d+)/g,"$1")),e.removeClass("a-form-error"),e.addClass("a-form-normal"),!0;e.removeClass("a-form-normal");e.addClass("a-form-error");return!1},isUserClickInSummary:function(a){var b=c.getQsWidgetSummaryId();for(a=null==a?null:a.target;null!=a;){if(a.id.substring(0,b.length)==b)return!0;a=a.parentElement}return!1}}});
"use strict";k.when("A","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants").register("QuantitySelectorWidget",function(d,a,c,h){function g(b){a.deactivateWidget(b);var c=a.getQsWidgetButtonContainer(b),f=a.getQsWidgetDropdownContainer(b),e=a.getQsWidgetDropdownElement(b),d=a.getQsWidgetQuantityContainer(b),g=a.getQsWidgetSummaryAtcButton(b),h=a.getQsWidgetFooterPriceContainer(b),l=a.getQsWidgetFooterQuantitySuffixContainer(b);a.setComponentVisibility(h,!0);a.setComponentVisibility(l,
!0);h=a.getQsWidgetTextInputContainer(b);a.isComponentVisible(h)||a.showComponent(c);a.hideComponent(f);a.hideComponent(e);a.hideComponent(d);a.hideComponent(g);a.resetQsWidgetContainerMinWidthAndHeight(b)}function l(b,g,f){var e=a.getQsItem(b,g),t=e.quantityText,l=e.quantityTextAbbreviatedSuffix,k=e.quantityTextFullSuffix,p=e.selectedText,e=e.price,q=a.getQsWidgetSummaryPriceSymbolElement(b),x=a.getQsWidgetSummaryPriceWholeElement(b),z=a.getQsWidgetSummaryPriceFractionElement(b),A=a.getQsWidgetSummaryPriceDecimalElement(b);
a.setHtml(q,e.currencySymbol);a.setHtml(x,e.wholeValue);a.setHtml(z,e.fractionValue);a.setHtml(A,e.decimalSeparator);q=a.getQsWidgetQuantityElement(b);a.setHtml(q,t);t=a.getQsWidgetQuantitySuffixElement(b);l&&k?(a.setHtml(t,l),l=a.getQsWidgetInitialViewSuffixElement(b),a.setHtml(l,k)):a.setHtml(t,"");l=a.getQsWidgetFooterPriceSymbolElement(b);t=a.getQsWidgetFooterPriceWholeElement(b);q=a.getQsWidgetFooterPriceFractionElement(b);x=a.getQsWidgetFooterPriceDecimalElement(b);a.setHtml(l,e.currencySymbol);
a.setHtml(t,e.wholeValue);a.setHtml(q,e.fractionValue);a.setHtml(x,e.decimalSeparator);k&&(e=a.getQsWidgetFooterQuantitySuffixElement(b),a.setHtml(e,k));a.isInitialViewDropdown(b)&&(a.getQsWidgetButtonAsComponent(b).text(p),k="Current quantity "+p+". Click to change quantity",a.getQsWidgetButton(b).attr("aria-label",k));c.setSelectedId(b,g);f&&d.trigger(h.getQsWidgetEventTriggerAction(),b)}function k(b,g){var f=a.getQsWidgetTextInputElement(b),e=f.val(),t=a.getQsWidgetButtonContainer(b),u=a.getQsWidgetTextInputContainer(b),
r=a.getQsWidgetTextInputUpdateButtonContainer(b),p=a.getQsItemFromQuantityText(b,e);a.hideComponent(r);p?(a.hideComponent(u),a.showComponent(t),l(b,p.id,g)):(a.hideComponent(t),a.showComponent(u),f.blur(),c.setSelectedQuantity(b,e),g&&d.trigger(h.getQsWidgetEventTriggerAction(),b))}d.on(h.getQsWidgetEventSelectId(),function(b,c,f,e){l(b,c,f);c=a.getQsWidgetButtonContainer(b);f=a.getQsWidgetTextInputContainer(b);b=a.getQsWidgetTextInputUpdateButtonContainer(b);a.hideComponent(b);a.hideComponent(f);
a.showComponent(c);e&&e()});d.on(h.getQsWidgetEventSelectQuantity(),function(b,c,f,e){a.getQsWidgetTextInputElement(b).val(c);k(b,f);e&&e()});return{hideAllPopover:function(){for(var b=a.getActivatedQsWidgets(),c=0;c<b.length;c++)g(b[c])},showPopover:function(b){a.activateWidget(b);a.setQsWidgetContainerMinWidthAndHeight(b);var d=a.getQsWidgetDropdownUnorderedListElement(b),f=a.getQsWidgetButtonContainer(b),e=a.getQsWidgetDropdownContainer(b),g=a.getQsWidgetDropdownElement(b),h=a.getQsWidgetQuantityContainer(b),
l=a.getQsWidgetSummaryAtcButton(b);a.setHtml(d,a.generateQsDropdownDOM(b));var d=a.getQsWidgetFooterPriceContainer(b),k=a.getQsWidgetFooterQuantitySuffixContainer(b);a.setComponentVisibility(d,!1);a.setComponentVisibility(k,!1);a.showComponent(g);a.hideComponent(h);a.hideComponent(l);a.showComponent(e);a.hideComponent(f);a.popOutDropDownContainer(b);e=c.getQsWidgetConfiguration(b);if(f=e.qsItems)e=e.selectedId,null===e&&(e=f[0].id),a.getQsWidgetDropdownItemElement(b,e).focus()},showConfirmation:function(b){a.activateWidget(b);
var c=a.getQsWidgetButtonContainer(b),f=a.getQsWidgetDropdownContainer(b),e=a.getQsWidgetDropdownElement(b),d=a.getQsWidgetQuantityContainer(b);b=a.getQsWidgetSummaryAtcButton(b);a.hideComponent(e);a.showComponent(d);a.showComponent(b);a.showComponent(f);a.hideComponent(c)},showPrice:function(b,c){c=a.getQsItem(b,c).price;var f=a.getQsWidgetSummaryPriceSymbolElement(b),e=a.getQsWidgetSummaryPriceWholeElement(b),d=a.getQsWidgetSummaryPriceFractionElement(b);b=a.getQsWidgetSummaryPriceDecimalElement(b);
a.setHtml(f,c.currencySymbol);a.setHtml(e,c.wholeValue);a.setHtml(d,c.fractionValue);a.setHtml(b,c.decimalSeparator)},selectOption:l,showTextInput:function(b,c){var f=a.getQsWidgetTextInputContainer(b),e=a.getQsWidgetTextInputUpdateButtonContainer(b),d=a.getQsWidgetButtonContainer(b);a.hideComponent(d);a.showComponent(f);var g=a.getQsWidgetTextInputElement(b);c&&g.val(c);c=g.val();a.isQsWidgetTextInputValid(b,c)&&a.getSelectedQuantity(b)!==c?a.showComponent(e):a.hideComponent(e);setTimeout(function(){g.focus()},
200)},validateAndSelectQuantity:k,selectConfirmation:function(b){a.isActionTriggerOnConfirmation(b)&&d.trigger(h.getQsWidgetEventTriggerAction(),b);g(b)}}});"use strict";k.when("A","QuantitySelectorWidget","QuantitySelectorUtils","QuantitySelectorState","QuantitySelectorConstants","QuantitySelectorMetrics","QuantitySelectorAUIDeps","QuantitySelectorMetadata").register("QuantitySelector",function(d,a,c,h,g,l,k,b){function n(a,e){try{var d=c.isMobile(e)}catch(g){g instanceof TypeError&&l.incrementInvalidIdCount();
return}try{if(!c.isInitialized(e)||a)eval(b.getMetaConfiguration(e,"script")),h.setInitialized(e),h.saveOriginalSettings(e),c.initializeWidget(e),c.isQsWidgetEnabled(e)?c.enableQsWidget(e):c.disableQsWidget(e),l.incrementInitializeCount(!0,d)}catch(g){l.incrementInitializeCount(!1,d)}}d.declarative(g.getQsWidgetButtonDecl(),"click",function(b){var e=b.data.qsUID;(b=c.isMobile(e))?a.showBottomSheet(e):a.showPopover(e);l.incrementShowPopup(b);c.isInitialViewDropdown(e)?l.logCsm(e,"cqd"):l.logCsm(e,
"ccq");setTimeout(function(){c.saveQsWidgetDropdownTopPosition(e)},250)});d.declarative(g.getQsWidgetDropdownDecl(),"click",function(b){var e=b.data.qsUID;b=b.data.id;var d=c.isActionTriggerOnSelect(e),g=c.isTextInputRequired(e,b),h=c.isConfirmationViewEnabled(e),k=c.isQsWidgetDropdownScrolled(e);h?k?(c.setQsWidgetDropdownScrolled(e),l.logCsm(e,"dcq_scl")):(c.clearQsWidgetDropdownScrolled(e),l.logCsm(e,"dcq")):k?l.logCsm(e,"dsq_scl"):l.logCsm(e,"dsq");a.selectOption(e,b,d&&!g.result);g.result?a.showTextInput(e,
g.initialQuantityText):h&&a.showConfirmation(e)});d.declarative(g.getQsWidgetDropdownItemDecl(),"click",function(b){a.alignQsItem(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"focusin",function(b){a.showPrice(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"mouseenter",function(b){a.showPrice(b.data.qsUID,b.data.id)});d.declarative(g.getQsWidgetDropdownDecl(),"mouseleave",function(b){b=b.data.qsUID;var c=h.getQsWidgetConfiguration(b).selectedId;a.showPrice(b,
c)});d.declarative(g.getQsWidgetQuantityChangelinkDecl(),"click",function(b){b=b.data.qsUID;a.showPopover(b);l.incrementChangeLinkCount();c.saveQsWidgetDropdownTopPosition(b);l.logCsm(b,"ccl")});d.declarative(g.getQsWidgetSummaryAtcDecl(),"click",function(b){b=b.data.qsUID;a.selectConfirmation(b);c.isQsWidgetDropdownScrolled(b)?l.logCsm(b,"atc_scl"):l.logCsm(b,"atc")});d.declarative(g.getQsWidgetTextInputDecl(),"keydown",function(a){var b=a.data.qsUID,d=a.$event.which;8==d||9==d||13==d||37<=d&&40>=
d||46==d||(!(48<=d&&57>=d||96<=d&&105>=d)||a.$event.shiftKey||a.$event.altKey||a.$event.ctrlKey||a.$event.metaKey?a.$event.preventDefault():3<=c.getQsWidgetTextInputElement(b).val().length&&a.$event.preventDefault())});d.declarative(g.getQsWidgetTextInputDecl(),"keyup",function(b){var d=b.data.qsUID;c.validateQsWidgetTextInput(d)&&13==b.$event.keyCode?(b=c.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,b)):a.showTextInput(d)});d.declarative(g.getQsWidgetTextInputDecl(),"focusout",function(b){b=
b.data.qsUID;if(""===c.getQsWidgetTextInputElement(b).val()){var d;d=(d=h.getQsWidgetConfiguration(b).selectedId)?c.getQsItem(b,d).selectedText:c.getSelectedQuantity(b);a.showTextInput(b,d);c.validateQsWidgetTextInput(b)}});d.declarative(g.getQsWidgetTextInputDecl(),"change",function(b){a.showTextInput(b.data.qsUID)});d.declarative(g.getQsWidgetTextInputUpdateButtonDecl(),"click",function(b){var d=b.data.qsUID;c.validateQsWidgetTextInput(d)&&(d=b.data.qsUID,b=c.isActionTriggerOnSelect(d),a.validateAndSelectQuantity(d,
b))});d.$(document).click(function(b){0!=c.getActivatedQsWidgets().length&&(c.isUserClickInSummary(b)||a.hideAllPopover())});d.$(q).resize(function(){a.hideAllPopover()});d.on(g.getQsWidgetEventInitialize(),function(a,b){k.initialize();if("string"==typeof b)n(a,b);else{b=h.getQsUIDs();for(var c=0;c<b.length;c++)n(a,b[c])}});d.on(g.getQsWidgetEventConfigureEnable(),function(a){c.enableQsWidget(a)});d.on(g.getQsWidgetEventConfigureDisable(),function(a){c.disableQsWidget(a)});d.on(g.getQsWidgetEventConfigureReset(),
function(a){for(var b=h.getQsUIDs(),c=0;c<b.length;c++){var k=b[c];if("string"!==typeof a||a==k)h.loadOriginalSettings(k),d.trigger(g.getQsWidgetEventInitialize(),!0,k)}});return{loadStateAndInitializeWidget:function(a){var b=g.getQsWidgetConfigurationId(a),c=g.getQsWidgetStateScriptSelectorQuery(a),c=d.$(c).first(),c=k.aUtil.parseJSON(c.html());k.aState.state(b,c);n(!0,a)}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("ConsumablesATCActionAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,m=f._namespace||f.attributeErrors,b=m?m("ALMCartActionAssets",""):f;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,f,m){e.when("A").register("alm-cart-action-query-string-utils",function(b){return{addQueryStringParamsToUrl:function(c,a){var d={};if(a&&a.reftag){var h=a.reftag;"string"===typeof h&&""!==h&&(d.ref_=h)}if(a&&a.queryLogInfoParams){var h=a.queryLogInfoParams,g;for(g in h)h.hasOwnProperty(g)&&"string"===
typeof g&&""!==g&&"string"===typeof h[g]&&""!==h[g]&&(d[g]=h[g])}a&&a.asin&&"string"===typeof a.asin&&""!==a.asin&&(d["discoveredAsins.0"]=a.asin);(a=b.$.param(d))&&"string"===typeof a&&""!==a&&(c+="?"+a);return c}}});"use strict";e.when("A","jQuery").register("afx-add-all-helper",function(b,c){return{updateQuantityForAsin:function(a,d,b){a&&d&&!isNaN(b)&&c("#"+a).closest("form").find("#afx-add-all-"+d+"-quantity").attr("value",b)}}});"use strict";e.when("A","jQuery","a-button").register("fx-atfc-button-utils",
function(b,c,a){var d=!1;return{hideButtonAndRenderSpinner:function(a){var b=a.$currentTarget.find(".a-button");b&&b.length&&(d=!0,a="atfc-spinner-"+a.data.asin,b.wrap('\x3cdiv id\x3d"'+a+'" class\x3d"atfc-spinner"\x3e\x3c/div\x3e'),c("#"+a).css({width:b.outerWidth()+"px"}),c("#"+a).css({height:b.outerHeight()+"px"}),b.css("visibility","hidden"))},showButtonAndRemoveSpinner:function(a){var b=a.$currentTarget.find(".a-button");a=c("#atfc-spinner-"+a.data.asin);b&&b.length&&a&&a.length&&(d=!1,b.css("visibility",
"visible"),b.unwrap())},shouldDisableButtonClicks:function(){return d}}});"use strict";e.when("fresh-shared-add-to-cart-v2").register("fresh-add-to-cart",function(b){function c(a){b.attachCallbacks(a)}b.initialize("desktop");return{addToFreshCart:function(a){c(a)},attachCallbacks:c,updateAddAllQuantityForAsin:b.updateAddAllQuantityForAsin,updateQuantity:b.updateQuantity}});"use strict";e.when("A","alm-cart-action-query-string-utils").register("afx-atfc-v2-proxy",function(b,c){return{addToFreshCart:function(a){var d=
c.addQueryStringParamsToUrl("/alm/addtofreshcart",a.data);b.$.ajax(d,{type:"POST",contentType:"application/json",data:JSON.stringify(a.data)}).done(a.success).fail(a.error)},showGenericErrorModal:function(a){b.post("/alm/atfcGenericErrorModal/",{timeout:5E3,success:a.success,error:a.error})}}});"use strict";e.when("A").register("fx-atfo-proxy",function(b){return{addToFreshOrder:function(c){var a="/fom/add-to-fresh-order";c.reftag!==m&&(a+="/ref\x3d"+c.reftag);c.data!==m&&c.data.csrfToken&&(a+="?csrf\x3d"+
encodeURIComponent(c.data.csrfToken));b.post(a,{success:c.success,error:c.error,params:JSON.stringify(c.data),paramsFormat:"json",contentType:"application/json"})},getFallbackErrorModalHtml:function(){return{header:"Item was not added to the order",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your order.\x3c/b\x3e Please try again.",footer:"\x3cspan class\x3d'a-declarative' data-action\x3d'a-popover-close'data-a-popover-close\x3d'{}'\x3e\n\x3cspan class\x3d'a-button primary-fresh-btn'\x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cinput class\x3d'a-button-input'type\x3d'submit'\x3e\x3cspan class\x3d'a-button-text' aria-hidden\x3d'true'\x3eOK\n\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e"}}}});
"use strict";e.when("A").register("afx-atfc-cart-conflicts-proxy",function(b){function c(a){a.ref=a.reftag;a.client="atfc";return a}return{getConflictSummary:function(a){var d=c(a.data);b.post("/afx/cartconflicts/getconflictsummary",{timeout:5E3,success:a.success,error:a.error,params:d})},resolve:function(a){var d=c(a.data);b.post("/afx/cartconflicts/resolve",{timeout:5E3,success:a.success,error:a.error,params:d})},substitute:function(a){a=c(a.data);a.sourceUrl=f.location.pathname+f.location.search;
a=b.$.param(a);f.location.href="/afx/cartconflicts/resolve/substitute?"+a}}});"use strict";e.when("A").register("afx-get-cart-count",function(b){return function(c){b.post("/gp/api/cart/1.0/get-cart-count.json",{timeout:5E3,params:{sessionID:c.sessionID,clientName:"SharedFreshHandler"},success:c.success,error:c.error})}});"use strict";e.register("afx-callbacks-helper",function(b){function c(d){var b=d in a;!b&&e.log("Unable to retrieve callback for "+d,"Error");return b}var a={};return{addCallbacks:function(d){a[d.clientID||
"default"]=d},success:function(d,b,e){d=d in a?d:"default";c(d)&&a[d].success&&a[d].success(b,e)},error:function(b,e,f,k){b=b in a?b:"default";c(b)&&a[b].error&&a[b].error(e,f,k)}}});"use strict";e.register("afx-csm-metrics-utils",function(){var b={},c=function(a,b){f.ue&&f.ue.count&&a&&b&&f.ue.count(a,b)};return{startWidgetTimer:function(a){b[a]=Date.now()},endWidgetTimer:function(a,d){a=Date.now()-b[a];c(d,a)},setWidgetClickTimestamp:function(a){f.ue&&f.uet&&a&&f.uet("tc",a,{wb:1})},setWidgetTimestamp:function(a,
b){f.ue&&f.uet&&a&&b&&f.uet(a,b,{wb:1})},increment:function(a){f.ue&&f.ue.count&&a&&f.ue.count(a,(f.ue.count(a)||0)+1)},setCount:c,sendWidgetMetrics:function(a){f.ue&&f.uex&&a&&f.uex("ld",a,{wb:1})}}});"use strict";e.when("A","a-modal").register("fresh-atfc-modal-utils",function(b,c){return{removeModal:function(){var a=c.get("fresh-add-to-cart-modal");a&&c.remove(a)},showModal:function(a,d,e){d&&(d={name:"fresh-add-to-cart-modal",header:d.header,inlineContent:d.body,footer:d.footer},"desktop"===e&&
(d.width=325),c.create(a.$currentTarget,d).show(),b.on("a:popover:afterHide:".concat("fresh-add-to-cart-modal"),function(a){c.remove(a.popover)}))}}});"use strict";e.when("A","jQuery","afx-atfc-v2-proxy","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","fresh-atfc-ewc-helper").register("fresh-atfc-error-modal-utils",function(b,c,a,d,f,g,k){function n(a,d,c){e.when("a-modal").execute("showModal",function(e){d||q(a);a.data.quantity&&(g.updateQuantity("fresh-clear-slot-button",a.data.quantity),
g.updateQuantity("alcohol-warning-fresh-add-to-cart-button",a.data.quantity));var f={name:"fresh-add-to-cart-error-modal",header:d.header,inlineContent:d.errorMessage,footer:d.footer};"desktop"===c&&(f.width=325);e.create(a.$currentTarget,f).show();b.on("a:popover:afterHide:".concat("fresh-add-to-cart-error-modal"),function(b){k.refreshCart(a.data.sessionID);e.remove(b.popover)})})}function q(b,d){a.showGenericErrorModal({success:function(a,e,f){a&&(a=c.parseJSON(f.http.response),l(b,a,d))},error:function(){e.log("Failed to get the generic error modal",
"Error");n(b,{header:"Item was not added to the cart",errorMessage:"We're sorry, there was an error and \x3cb\x3ethis item was not added to your cart.\x3c/b\x3e Please try again.",footer:'\x3cspan class\x3d"a-declarative" data-action\x3d"a-popover-close"data-a-popover-close\x3d"{}"\x3e\n\x3cspan class\x3d"a-button primary-fresh-btn"\x3e\x3cspan class\x3d"a-button-inner"\x3e\x3cinput class\x3d"a-button-input"type\x3d"submit"\x3e\x3cspan class\x3d"a-button-text" aria-hidden\x3d"true"\x3eOK\n    \x3c/span\x3e\x3c/span\x3e\x3c/span\x3e\n\x3c/span\x3e'},
d)}})}function l(a,b,c){var e=b.errorModalHtml,g=f.getMetricsForDevice(c);b.clientResponseModel&&b.clientResponseModel.uberCartStatus&&b.clientResponseModel.uberCartStatus.errorStatusCode in g&&d.increment(g[b.clientResponseModel.uberCartStatus.errorStatusCode]);n(a,e,c)}return{removeModal:function(){e.when("a-modal").execute("removeModal",function(a){var b=a.get("fresh-add-to-cart-error-modal");b&&a.remove(b)})},showModal:n,showGenericErrorModal:q,parseResponseAndShowErrorModal:l}});"use strict";
e.when("A","jQuery","afx-atfc-v2-proxy","afx-get-cart-count").register("fresh-atfc-ewc-helper",function(b,c,a,d){function f(a){d({sessionID:a,success:function(a){a&&a.isOK&&a.total&&g(a.total.numActiveItem)},error:function(){e.log("Failed to get cart count","Error",a)}})}function g(a){e.when("nav.setCartCount").execute(function(b){b(a)});e.when("mash").execute(function(b){b.cart&&"function"===typeof b.cart.didUpdate&&b.cart.didUpdate({newCartQuantity:a})})}var k;e.when("EWC").execute("add-to-cart-refresh",
function(a){k=a});e.when("nav.getFlyout").execute(function(a){a("ewc")});return{refreshCart:function(a){k!==m&&"function"===typeof k.refresh?k.refresh():f(a)}}});"use strict";e.when("A").register("f3-subnav-helper",function(b){return{triggerSubnavEvent:function(c){b.trigger("fresh-atfc:success","false",{almBrandId:c})}}});"use strict";e.when("A").register("f3-consumables-atc-helper",function(b){});"use strict";e.register("afx-metrics-helper",function(){var b={ATFC_COUNT:"afxAddToFreshCartCount",ATFC_SUCCESSFUL_ADD_COUNT:"afxAddToFreshCartSuccessfulAddCount",
ATFC_ERROR_MODAL_COUNT:"afxAddToFreshCartErrorModalCount",ATFC_UNEXPECTED_ERROR_COUNT:"afxAddToFreshCartUnexpectedErrorCount",ATFC_LATENCY_SCOPE:"afxAddToFreshCartLatencyScope",ATFC_ERROR_MODAL_LATENCY_SCOPE:"afxAddToFreshCartErrorModalLatencyScope",ATFC_CTCF:"afxAddToFreshCartCTCF",CLEAR_SLOT_ATFC_CTCF:"afxClearSlotAndAddToFreshCartCTFC",CART_SERVICE_RESPONSE_FALSE:"afxCartServiceResponseIsNotOKErrorCount",ITEM_NOT_AVAILABLE:"afxItemNotAvailableErrorModalCount",ITEM_PARTIALLY_AVAILABLE:"afxItemPartiallyAvailableErrorModalCount",
ITEM_PARTIALLY_AVAILABLE_FOR_RESERVATION:"afxItemPartiallyAvailableErrorModalCount",ADDRESS_NOT_SELECTED:"afxAddressNotSelectedErrorCount",INPUT_INVALID:"afxGeneralErrorModalCount",ITEM_NOT_AVAILABLE_FOR_RESERVATION:"afxItemNotAvailableForReservationErrorModalCount",INTERNAL_SERVER_ERROR:"afxGeneralErrorModalCount",PRICE_UNAVAILABLE:"afxItemNotAvailableErrorModalCount",QUANTITY_OVERFLOW:"afxUniqueItemQuantityOverflowErrorModalCount"};return{getMetricsForDevice:function(c){var a={};Object.keys(b).forEach(function(d){a[d]=
b[d]+":"+c});return a}}});"use strict";e.when("A").register("afx-quantity-helper",function(b){var c={};return{updateQuantity:function(a,b){"undefined"!==typeof a&&null!==a&&!isNaN(b)&&0<b&&(c[a]=b||1)},getQuantity:function(a){a=a.closest(".a-button");return 0<a.length?c[a.attr("id")]||1:1}}});"use strict";e.when("A","afx-atfc-cart-conflicts-proxy").register("afx-atfc-cart-conflicts-executor",function(b,c){return{execute:function(a){c.getConflictSummary({data:a.data,success:function(d,e,f){!0===d.isSuccess?
!0===d.hasConflicts?c.substitute({data:a.data}):c.resolve({data:a.data,success:function(){b.trigger("fresh-cart-conflict-resolution:success");location.reload()},error:a.error}):a.error(f,e,"Failed to call getconflictsummary")},error:a.error})}}});"use strict";e.when("A","afx-atfc-v2-proxy","fx-atfo-proxy","fx-atfc-button-utils","afx-csm-metrics-utils","afx-metrics-helper","afx-quantity-helper","afx-callbacks-helper","afx-atfc-cart-conflicts-executor","fresh-atfc-error-modal-utils","fresh-atfc-ewc-helper",
"afx-add-all-helper","f3-subnav-helper","f3-consumables-atc-helper").register("fresh-shared-add-to-cart-v2",function(b,c,a,d,h,g,k,n,q,l,A,v,B,w){return{updateQuantity:k.updateQuantity,attachCallbacks:n.addCallbacks,updateAddAllQuantityForAsin:v.updateQuantityForAsin,initialize:function(t){function u(a,e,f,g){y();a.data.amountInUom!==m||!a.data.pickingStrategy||"bulk"!==a.data.pickingStrategy&&"catch"!==a.data.pickingStrategy||(a.data.amountInUom=a.data.quantity,a.data.quantity=1);c.addToFreshCart({data:a.data,
success:function(b,c,g){200===g.status&&(h.increment(p.ATFC_SUCCESSFUL_ADD_COUNT),c=p.ATFC_CTCF+":lineItemBucket:"+z(b),h.endWidgetTimer(e,c),A.refreshCart(a.data.sessionID),n.success(a.data.clientID,a,b.clientResponseModel),B.triggerSubnavEvent(a.data.brandId),w!=m&&"function"===typeof w.triggerCPIEvent&&w.triggerCPIEvent(a.data.brandId));l.removeModal();d.showButtonAndRemoveSpinner(a);f&&f()},error:function(c,f,m){var x=p.ATFC_CTCF,r=c.responseText,q;l.removeModal();r&&(q=JSON.parse(r),x=p.ATFC_CTCF+
":lineItemBucket:"+z(q.clientResponseModel));300===c.status?(h.increment(p.ATFC_ERROR_MODAL_COUNT),!a.data.quantity&&a.$target&&(a.data.quantity=k.getQuantity(a.$target)),c={asin:a.data.asin,offerListingID:a.data.offerListingID,quantity:a.data.quantity,redirectURL:document.location.href,ref:"afx_atfc_noaddress"},h.increment(p.ADDRESS_NOT_SELECTED),c=b.$.param(c),document.location.href="/afx/nc/chooseaddress?"+c):400===c.status&&q?(h.increment(p.ATFC_ERROR_MODAL_COUNT),l.parseResponseAndShowErrorModal(a,
q,t)):(h.increment(p.ATFC_UNEXPECTED_ERROR_COUNT),l.showGenericErrorModal(a,t),n.error(a.data.clientID,a,c,f,m));h.endWidgetTimer(e,x);d.showButtonAndRemoveSpinner(a);g&&g()}})}function v(a,c){h.startWidgetTimer(c);b.post("/afx/slotselection/cancel",{timeout:5E3,params:{token:a.data.additionalParams.csrfToken},success:function(){a.data.quantity=k.getQuantity(a.$target);u(a,c,function(){location.reload()})},error:function(){e.log("Failed to clear reservation");l.showGenericErrorModal(a,t)}})}function y(){return f.amazon&&
f.amazon.cordova&&f.amazon.cordova.notification&&f.amazon.cordova.notification.vibrate&&f.amazon.cordova.notification.vibrate(50)}function z(a){return a.items&&Math.ceil(a.items.length/5)}var p=g.getMetricsForDevice(t),r=p.ATFC_LATENCY_SCOPE+Date.now();b.on("quantity-selector-widget:action:AddToCartAction",function(a){a.additionalParams&&(a.additionalParams=b.$.parseJSON(a.additionalParams));a.queryLogInfoParams&&(a.queryLogInfoParams=b.$.parseJSON(a.queryLogInfoParams));var c={data:a};if(a.tunneledData&&
a.tunneledData.$target){var e=a.tunneledData.$target,c=b.$.extend(c,{$target:e,$currentTarget:e,$declarativeTarget:e});delete a.tunneledData}else a=b.$("#qs-widget-button-container-"+a.qsUID),c=b.$.extend(c,{$target:a,$currentTarget:a,$declarativeTarget:a}),d.hideButtonAndRenderSpinner(c);u(c,r)});b.declarative("fresh-clear-slot","click",function(a){a.$currentTarget.context.disabled=!0;v(a,r)});b.declarative("fresh-add-to-cart","click",function(a){h.startWidgetTimer(r);h.increment(p.ATFC_COUNT);d.shouldDisableButtonClicks()||
a.$currentTarget.find("input").is(":disabled")||(d.hideButtonAndRenderSpinner(a),a.data.qsUID?b.trigger("quantity-selector-widget:triggerAction",a.data.qsUID,"AddToCartAction",{$target:a.$currentTarget}):(a.data.quantity=k.getQuantity(a.$target),u(a,r)))});b.declarative("fresh-add-to-cart-alcohol","click",function(a){a.$currentTarget.context.disabled=!0;h.startWidgetTimer(r);a.data.quantity=k.getQuantity(a.$target);u(a,r)});b.declarative("fresh-add-to-cart-regions-resolve","click",function(a){a.$currentTarget.context.disabled=
!0;l.removeModal();q.execute({data:a.data,error:function(b,c,d){l.showGenericErrorModal(a,t);n.error(a.data.clientID,a,b,c,d)}})});b.declarative("fresh-add-to-order","click",function(b){d.shouldDisableButtonClicks()||(d.hideButtonAndRenderSpinner(b),y(),a.addToFreshOrder({data:b.data,success:function(a,c,e){200===e.http.status&&n.success(b.data.clientID,b,a.clientResponseModel);d.showButtonAndRemoveSpinner(b)},error:function(c,e,f){l.removeModal();if(400===c.http.status)c=JSON.parse(c.responseText),
l.parseResponseAndShowErrorModal(b,c,t);else if(401===c.http.status)location.reload();else{var g=a.getFallbackErrorModalHtml();l.showModal(b,g,t);n.error(b.data.clientID,b,c,e,f)}d.showButtonAndRemoveSpinner(b)}}))})}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("APEAdaptiveSkyscraperWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(p){var v=window.AmazonUIPageJS||window.P,q=v._namespace||v.attributeErrors,e=q?q("SearchWebSpecBasedShoppingWidgetAssets",""):v;e.guardFatal?e.guardFatal(p)(e,window):e.execute(function(){p(e,window)})})(function(p,v,q){p.when("A","rush-router-pattern-parser","a-popover").register("s-sbs-widget-common",function(e,k,f){var h=e.$;return{getQueryParameters:function(){var a=(v.location.href||"").split("?"),a=1<a.length?a.slice(1).join("?"):a[0];return k.parseQueryString(a)},getSearchParametersMap:function(a){var b=
{},d,c;if(a.rh!==q)for(a=a.rh.split(","),c=0;c<a.length;c++)d=a[c].split(":"),b[d[0]]=d[1];return b},getNodeListString:function(a){var b="",d,c;for(c=0;c<a.length;c++)d=a[c],""!==b&&(b+=","),b=b+"n:"+d;return b},buildSearchQueryString:function(a){var b,d="";for(b in a)""!==d&&"n"!==b&&(d+=","),"nodeScope"===b?d+=a[b]:"n"!==b&&(d=d+b+":"+a[b]);return d},setQueryParameter:function(a,b,d){var c=e.state("widgetData");c!==q&&c.hasOwnProperty(b)&&(b=c[b],b!==q&&""!==b&&(a[d]=b));return a},addLinkParameters:function(a){var b=
e.state("linkParams");b&&h.each(b,function(b,c){a[b]=c});return a},showWidget:function(a){a.find(".sbs-widget-expander-content").removeClass("aok-hidden");a.find(".sbs-spinner-container").addClass("aok-hidden")},hideWidget:function(a){a.find(".sbs-widget-expander-content").addClass("aok-hidden");a.find(".sbs-spinner-container").removeClass("aok-hidden");a.find(".sbs-no-results-alert").addClass("aok-hidden");a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden")},toggleMainUI:function(a){a.find(".sbs-widget-expander-content").slideToggle(200);
a.find(".sbs-expander-icon").toggleClass("sbs-expander-hidden sbs-expander-shown")},scrollToTarget:function(a){a&&h(a).closest(".sbs-refinement-bin").scrollTop(a.offsetTop-a.parentElement.offsetTop+5)},updatePopularRefinementsVisibility:function(a){var b=0,d=a.find("input:checked").length;a.find(".sbs-featured-refinement").toggleClass("aok-hidden",0<d);0===d&&(a.find("div.sbs-featured-refinement").each(function(a,d){"none"!==h(d).css("display")&&b++}),a.find(".sbs-refinement-list-divider").toggleClass("aok-hidden",
0===b))},showApplyFiltersPopoverOnFirstRefinementSelection:function(a){var b=e.state("widgetData");b&&b.hasSelectedRefinements&&"false"===b.hasSelectedRefinements.toLowerCase()&&((a=f.get(a.find(".sbs-apply-filters-button")))&&a.show(),b.hasSelectedRefinements="true",e.state.replace("widgetData",b))}}});p.when("A","s-sbs-eligible-refinements").register("s-sbs-widget-tagging",function(e,k){function f(b){return a.map(b.split(" "),function(a){if(-1<a.indexOf("sbs-refinement-tag-"))return a.substring(19)})[0]}
function h(b,d,c){var m=e.state("tagLabels"),f;m!==q&&1<m.length&&-1<m.indexOf(b)&&m.forEach(function(e){e===b?c.find(".sbs-refinement-container.sbs-refinement-tag-"+e).removeClass("sbs-tagging-hidden"):!1===d?c.find(".sbs-refinement-container.sbs-refinement-tag-"+e).each(function(b,t){c.find(t).addClass("sbs-tagging-hidden");f=a(t).find(":input");!0===f.prop("checked")&&(f.prop("checked",!1),k.updateStateRefinementsMap(t.id,a(t).closest(".sbs-refinement-bin").attr("id"),!1,"checkbox"===t.type))}):
c.find(".sbs-refinement-container.sbs-refinement-tag-"+e).removeClass("sbs-tagging-hidden")})}var a=e.$;return{getTag:f,updateTaggedRefinementsVisibility:h,verifyTaggedSelectedRefinements:function(a){var d=e.state("tagLabels"),c=[];d!==q&&1<d.length&&(d.forEach(function(d){0<a.find(".sbs-refinement-tag-"+d).find("input:checked").length&&c.push(d)}),a.find(".sbs-tag-button").removeClass("a-button-selected"),c.length===d.length||0===c.length?a.find(".sbs-tag-button-all").addClass("a-button-selected"):
c.forEach(function(c){h(c,!1,a);a.find(".sbs-tag-button-"+c).addClass("a-button-selected")}))},taggedRefinement:function(b,d,c){var m=e.state("tagLabels"),f,l;m!==q&&1<m.length&&(m=a(b).find(":input"),f=!0,l=0,"checkbox"===m.prop("type")&&(f=a(b).find(":input").prop("checked")),f?0===c.find(".sbs-tagging-hidden").length&&(c.find(".sbs-tag-button").removeClass("a-button-selected"),c.find(".sbs-tag-button-"+d).addClass("a-button-selected"),h(d,!1,c)):(c.find(".sbs-refinement-container.sbs-refinement-tag-"+
d).each(function(c,t){!0===a(t).find(":input").prop("checked")&&a(t).data("refinement-id")!==a(b).data("refinement-id")&&l++}),0===l&&(c.find(".sbs-tag-button").removeClass("a-button-selected"),c.find(".sbs-tag-button-all").addClass("a-button-selected"),h(d,!0,c))))},tagButtonHandler:function(b,d){"sbs-tag-button-all"===a(b).find(":input").data("button-id")?d.find("div[class*\x3d'sbs-refinement-tag']").removeClass("sbs-tagging-hidden"):h(f(b.className),!1,d)}}});p.when("A","s-sbs-widget-common").register("s-sbs-widget-feedback",
function(e,k){function f(a,c){var b=e.state("widgetData");b!==q&&b.hasOwnProperty("formsUrl")&&(b=b.formsUrl,c.find(".sbs-feedback-form").find("input[name\x3d__token_]").val(a.csrfToken.token),c.find(".sbs-feedback-selected-refinements-text-area").find("textarea").val(JSON.stringify(k.getQueryParameters())),e.post(b,{paramsFormat:"string",params:c.find(".sbs-feedback-form").serialize(),success:function(){},error:function(a,c,b){p.log("Status: "+c+";Error: "+b,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function h(a){var c=
e.state("widgetData");c!==q&&c.hasOwnProperty("sbsWidgetFormUrl")&&(c=c.sbsWidgetFormUrl,e.get(c,{accepts:"application/json",success:function(c){c.hasOwnProperty("csrfToken")&&c.csrfToken.hasOwnProperty("token")&&f(c,a)},error:function(a,c,b){p.log("Status: "+c+";Error: "+b,"SBS_CUSTOMER_FEEDBACK_ERROR")}}))}function a(a,c){c.find(".sbs-heading-container").find(".sbs-heading-text").each(function(a,c){b(c).addClass("sbs-feedback-hidden aok-hidden")});c.find(".sbs-heading-block").find("[headingId\x3d"+
a+"]").removeClass("sbs-feedback-hidden aok-hidden");c.find(".sbs-free-text-container").removeClass("sbs-feedback-hidden aok-hidden");c.find(".sbs-feedback-form-submit-button-container").removeClass("sbs-feedback-hidden aok-hidden")}var b=e.$;return{sendFeedbackToForm:f,submitFeedback:h,toggleFeedbackContent:a,createFeedbackQuestionButtonClickHandler:function(e){return function(c){var f=b(c.currentTarget);c.preventDefault();e.find(".sbs-radio-button-container").find("input:checked").each(function(a,
c){b(c).prop("checked",!1)});c=f.find(":input");c.prop("checked",!0);c=c.attr("id");a(c,e)}},createFeedbackSubmitButtonClickHandler:function(a){return function(c){c.preventDefault();a.find(".sbs-feedback-form").fadeOut("slow",function(){a.find(".sbs-feedback-post-submit-container").removeClass("sbs-feedback-hidden aok-hidden").css("display","none").fadeIn("slow");a.find(".sbs-feedback-post-submit-content").focus()});h(a)}}}});p.when("A","s-sbs-widget-common","ready").register("s-sbs-eligible-refinements",
function(e,k){function f(a,c,b){c=c.toString();a.hasOwnProperty(b)?-1===a[b].indexOf(c)&&(a[b]+="|"+c):a[b]=c;return a}function h(a,c,b){var e;c=c.toString();a.hasOwnProperty(b)&&(e=a[b].split("|"),c=e.indexOf(c),-1<c&&(e.splice(c,1),0<e.length?a[b]=e.join("|"):delete a[b]));return a}function a(a,c){var b=[],e=!1,d=l(c),f;if(0!==Object.keys(a).length)for(c=0;c<a.values.length;c++)"0"===a.values[c].notAvailable&&b.push(a.values[c].id);if(d.hasClass("sbs-featured-refinement-bin")){if(d.find(".sbs-button-list-item").addClass("sbs-ineligible-hidden"),
d.find(".a-button-selected").closest(".sbs-refinement-container").each(function(a,c){f=l(c).find(":input").data("refinement-id").toString();-1===b.indexOf(f)&&b.push(f)}),0!==b.length)for(c=0;c<b.length;c++)d.find("[data-refinement-id\x3d'"+b[c]+"']").closest(".sbs-button-list-item").removeClass("sbs-ineligible-hidden")}else if(d.find(".sbs-refinement-container").addClass("sbs-ineligible-hidden"),d.find("input:checked").closest(".sbs-refinement-container").each(function(a,c){f=l(c).data("refinement-id").toString();
-1===b.indexOf(f)&&b.push(f)}),0!==b.length)for(c=0;c<b.length;c++)d.find("[data-refinement-id\x3d'"+b[c]+"']").removeClass("sbs-ineligible-hidden");0<d.find(".sbs-refinement-container").not(".sbs-ineligible-hidden").length&&(e=!0);return e}function b(c,b,e){var d,f=c.additionalFilterData["*value*"].sbs.refinements,h,m,r;e.find(".sbs-refinement-bin").each(function(c,e){r=l(e).data("refinement-bin-id");if(r!==b&&"n"!==r){h=!1;m={};for(d=0;d<f.length;d++)if(f[d].shortId===r){m=f[d];break}(h=a(m,e))?
l(e).closest(".sbs-refinement-bin-cell").removeClass("aok-hidden"):l(e).closest(".sbs-refinement-bin-cell").addClass("aok-hidden")}k.updatePopularRefinementsVisibility(l(e))})}function d(a){var c={};Object.keys(a).sort().forEach(function(b){c[b]=a[b]});delete c["feature-set-definitions"];return JSON.stringify(c)}function c(){var a=e.state("scopedBrowseNodeIds"),c=e.state("stateRefinementsMap"),b="";a&&(b=a.join(","));b&&c&&c.n?-1===a.indexOf(c.n)&&(b+=","+c.n):c&&c.n&&(b=c.n);return b}function m(){var a=
e.state("stateRefinementsMap"),b=e.state("widgetData"),d=c(),f,g,h;if(b&&a&&d){f={pageNumber:"1",asinCountPerPage:"10",filters:[{runLevel:"1",filterId:"sbs",filterType:"rsas",filterParameters:{OptionalMap:{size:"1","include-refinements":"true","feature-set-definitions":'{"REFINEMENTS": {"deliveryDayRefinement": "enabledWithoutBinning","enableRefinementDiscriminators": "false","enableSmartRefinements": "true"}}'}}}]};g=f.filters[0].filterParameters.OptionalMap;g["search-alias"]=b.searchAlias;g["session-id"]=
b.sessionId;g["marketplace-id"]=b.marketplace;g.store=b.store;g.keywords=b.marketplaceDefaultLanguageKeyword.toLowerCase();g.node=d;for(h in a)"n"!==h&&(b=a[h].split("|"),b.sort(),g[h]=b.join("|"));f.filters[0].filterParameters.OptionalMap=g}return f}function q(a,c,f,h,g){var m,w=!1,r={},v=e.state("widgetData");e.state("cachedCalls")&&(r=e.state("cachedCalls"));v&&(w="true"===v.noResults.toLowerCase());l.ajax({type:"POST",url:"/gp/sfx/get-filtered-asins.html",dataType:"json",timeout:3E3,xhrFields:{withCredentials:!0},
data:{afsRequest:JSON.stringify(a)},success:function(f){f.hasOwnProperty("additionalFilterData")&&0<f.additionalFilterData["*value*"].sbs.refinements.length&&(m=d(a.filters[0].filterParameters.OptionalMap),r[m]=f,e.state.replace("cachedCalls",r),b(f,c,h))},error:function(a,c,b){p.log("Status: "+c+";Error: "+b,"SBS_WIDGET_ELIGIBLE_REFINEMENTS_CALL_ERROR")},complete:function(){k.showWidget(h);k.scrollToTarget(g);k.showApplyFiltersPopoverOnFirstRefinementSelection(h);f&&!w&&k.toggleMainUI(h)}})}var l=
e.$;return{addRefinement:f,removeRefinement:h,updateRefinementsDisplayedInBin:a,processResponse:b,buildKey:d,buildNodeList:c,getAFSRequest:m,callAFS:q,updateStateRefinementsMap:function(a,c,b,d){var g=e.state("stateRefinementsMap");g&&(d?g=b?f(g,a,c):h(g,a,c):(g.hasOwnProperty(c)&&delete g[c],b&&(g=f(g,a,c))),e.state.replace("stateRefinementsMap",g))},updateEligibleRefinements:function(a,c,f,h){var g,l=m(),p=e.state("cachedCalls"),r;l?(p&&(g=d(l.filters[0].filterParameters.OptionalMap),g in p&&(r=
p[g])),r?e.delay(function(){b(r,a,f);k.showWidget(f);k.scrollToTarget(h)},150):q(l,a,c,f,h)):k.showWidget(f)}}});p.when("A","rush-framework","a-button","a-popover","s-sbs-widget-common","s-sbs-widget-tagging","s-sbs-widget-feedback","s-sbs-eligible-refinements","ready").register("s-sbs-widget",function(e,k,f,h,a,b,d,c){function m(a){0<a.find(".sbs-refinement-bin input:checked").length||0<a.find(".sbs-featured-refinement-button.a-button-selected").length?(f(a.find(".sbs-apply-filters-button")).enable(),
f(a.find(".sbs-reset-filters-button")).enable()):(f(a.find(".sbs-apply-filters-button")).disable(),f(a.find(".sbs-reset-filters-button")).disable())}function p(b){return function(d){var u=d.selectedButton.$button[0];d=n(b.find(".sbs-featured-refinement-bin")[0]).data("refinement-bin-id");u=n(u).find(":input").data("refinement-id");b.find(".sbs-refinement-bin").scrollTop(0);a.hideWidget(b);"n"===d&&(b.find(".sbs-tag-button").removeClass("a-button-selected"),b.find(".sbs-tag-button-all").addClass("a-button-selected"),
b.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden"),b.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden"),b.find(".sbs-refinement-bin-cell").removeClass("aok-hidden"),b.find(".sbs-refinement-bin input:checked").each(function(a,c){n(c).prop("checked",!1)}),b.find(".sbs-active-checkmark").addClass("aok-hidden"),b.find(".sbs-featured-refinement").removeClass("aok-hidden"),e.state.replace("stateRefinementsMap",{}));c.updateStateRefinementsMap(u,
d,!0,!1);c.updateEligibleRefinements(d,!1,b);f(b.find(".sbs-apply-filters-button")).enable();f(b.find(".sbs-reset-filters-button")).enable()}}function l(a){return function(c){b.tagButtonHandler(c.selectedButton.$button[0],a);m(a)}}function q(a){a.find(".sbs-tag-button").removeClass("a-button-selected");a.find(".sbs-tag-button-all").addClass("a-button-selected");a.find(".sbs-active-checkmark").addClass("aok-hidden");a.find(".sbs-featured-refinement-button").removeClass("a-button-selected");a.find(".sbs-refinement-bin input:checked").each(function(c,
b){a.find(b).prop("checked",!1)});a.find(".sbs-refinement-container.sbs-tagging-hidden").removeClass("sbs-tagging-hidden");a.find(".sbs-refinement-container.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-button-list-item.sbs-ineligible-hidden").removeClass("sbs-ineligible-hidden");a.find(".sbs-refinement-bin-cell").removeClass("aok-hidden");a.find(".sbs-apply-filters-button").addClass("a-button-disabled");a.find(".sbs-reset-filters-button").addClass("a-button-disabled");
a.find(".sbs-featured-refinement").removeClass("aok-hidden");a.find(".sbs-refinement-bin").scrollTop(0);a.find(".sbs-no-results-alert").addClass("aok-hidden");a.find(".sbs-feedback-post-submit-container").addClass("aok-hidden");e.state.replace("stateRefinementsMap",{})}function t(a){return function(){q(a)}}function y(d){return function(f){var u=n(f.currentTarget);f=u.closest(".sbs-refinement-container");var h=f.data("refinement-id"),g=f.closest(".sbs-refinement-bin"),p=g.data("refinement-bin-id"),
l=u.prop("checked"),u="checkbox"===u.prop("type"),k;a.hideWidget(d);u?g.find("[data-refinement-id\x3d'"+h+"']").each(function(a,c){n(c).find(":input").prop("checked",l);!n(c).hasClass("sbs-featured-refinement")&&l&&(k=n(c).closest("li").get(0))}):(g.find("input:checked").each(function(a,c){n(c).prop("checked",!1)}),g.find("[data-refinement-id\x3d'"+h+"']").each(function(a,c){n(c).find(":input").prop("checked",!0);n(c).hasClass("sbs-featured-refinement")||(k=n(c).closest("li").get(0))}));if(g=b.getTag(f.attr("class")))b.taggedRefinement(f,
g,d),k||(k=f.closest("li").get(0));m(d);0<d.find(".sbs-refinement-bin input:checked").length||0<d.find(".sbs-featured-refinement-button.a-button-selected").length?(c.updateStateRefinementsMap(h,p,l,u),l||(p=""),c.updateEligibleRefinements(p,!1,d,k)):e.delay(function(){q(d);a.showWidget(d);a.scrollToTarget(k)},150)}}function z(c){var b;(b=e.state("scopedBrowseNodeIds"))||(b=[]);b=a.getNodeListString(b);c.n&&(b+=",n:"+c.n);return b}function g(a,c){for(var b in c)"n"!==b&&(""===c[b]?delete a[b]:a[b]=
c[b]);return a}function A(a){var c={},b;a.find(".sbs-refinement-bin").each(function(a,b){var d=n(b).data("refinement-bin-id");a=n(b).find("input:checked").closest(".sbs-refinement-container");c[d]="";0<a.length&&n(a).each(function(a,b){""===c[d]?c[d]=n(b).data("refinement-id"):(new RegExp("(^"+n(b).data("refinement-id")+")|(\\|"+n(b).data("refinement-id")+")")).test(c[d])||(c[d]+="|"+n(b).data("refinement-id"))})});b=a.find(".sbs-featured-refinement-bin");0<b.length&&(b=b[0],a=a.find(".sbs-featured-refinement-button.a-button-selected"),
0<a.length&&(c[n(b).data("refinement-bin-id")]=n(a[0]).find(":input").data("refinement-id")));return c}function w(c){return function(){var b,d,e;if(!f(c.find(".sbs-apply-filters-button")).isEnabled())return!1;b=a.getQueryParameters();d=a.getSearchParametersMap(b);e=A(c);d=g(d,e);d.nodeScope=z(e);b.rh=a.buildSearchQueryString(d);b=a.setQueryParameter(b,"keyword","k");b=a.setQueryParameter(b,"refMarker","ref");b=a.setQueryParameter(b,"persistId","pid");b.page=1;b=a.addLinkParameters(b);b=location.origin+
location.pathname+"?"+n.param(b);return v.location=b}}function r(b){return function(){a.toggleMainUI(b)}}function B(a,b){var c=e.state("applyFiltersPopoverOptions");if(c)return c.position=b,h.create(a.find(".sbs-apply-filters-button"),c)}function x(){return function(a){h.remove(a.popover)}}function C(d){var f=!1,h=e.state("widgetData"),g=a.getQueryParameters(),g=a.getSearchParametersMap(g),k,l;d.find(".sbs-refinement-container").each(function(a,b){k=n(b).find(".a-link-normal");0<k.length&&k.attr("tabIndex",
"-1")});g.n&&(l=d.find(".sbs-featured-refinement-button.a-button-selected"),0<l.length&&g.n===l.first().find(":input").data("refinement-id").toString()||delete g.n);e.state("stateRefinementsMap",g);m(d);h&&(f="true"===h.hasSelectedRefinements.toLowerCase());f?(b.verifyTaggedSelectedRefinements(d),c.updateEligibleRefinements("",!0,d)):(d.find(".sbs-tag-button-all").addClass("a-button-selected"),B(d,"triggerRight"),a.showWidget(d))}var n=e.$;k.registerComponent("s-sbs-widget","s-sbs-widget",function(a){a=
n(a.elem());0<a.find(".es-sbs-top-slot-widget").length&&(C(a),a.find(".sbs-refinement-container").delegate("input","change",y(a)),a.find(".sbs-reset-filters-button").click(t(a)),a.find(".sbs-apply-filters-button").click(w(a)),a.find(".sbs-widget-heading").click(r(a)),e.on("a:button-group:featuredRefinementButtons:toggle",p(a)),e.on("a:button-group:tagButtons:toggle",l(a)),a.find(".sbs-feedback-form").submit(d.createFeedbackSubmitButtonClickHandler(a)),a.find(".sbs-yes-button").click(d.createFeedbackQuestionButtonClickHandler(a)),
a.find(".sbs-no-button").click(d.createFeedbackQuestionButtonClickHandler(a)),e.on("a:popover:dismiss:sbsApplyFiltersPopover",x()),e.on("a:popover:afterHide:sbsApplyFiltersPopover",x()))});return{updateApplyAndResetFiltersButtonState:m,createFeaturedRefinementButtonToggleHandler:p,createResetFiltersClickHandler:t,createRefinementClickHandler:y,updateNodeScopeWithSelectedSubtype:z,addSelectedRefinements:g,getSelectedRefinements:A,createApplyFiltersClickHandler:w,createWidgetExpanderClickHandler:r,
createApplyFiltersPopoverHideHandler:x,createApplyFiltersPopover:B,onWidgetLoad:C}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("SearchWebAskAndAssistWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(r){var l=window.AmazonUIPageJS||window.P,q=l._namespace||l.attributeErrors,m=q?q("SponsoredBrandsVideoAssets",""):l;m.guardFatal?m.guardFatal(r)(m,window):m.execute(function(){r(m,window)})})(function(r,l,q){"use strict";r.when("A","rush-framework","sbv-video","sbv-single-product","sbv-metrics-manager","sbv-automated-test-metrics-client","sbv-platform-compatibility").register("sbv-video-single-product",function(m,l,k,f,c,a,b){l.registerComponent("sbv-video-single-product","sbv-video-single-product",
function(a){var h=m.$(a.elem()),n=h.find(".sbv-video:first"),e=h.find(".sbv-product:first"),e=0===e.length?h.children().get(-1):e.get(0);b.setAppVersion(a.prop("appVersion"));h=c.builder().withMetricsIdentifier(a.prop("metricsIdentifier")).withWidgetIndex(a.prop("widgetIndex")).withDevicePlatform(a.prop("devicePlatform")).withDevicePlatformVersion(a.prop("devicePlatformVersion")||"").withDeviceModel(a.prop("deviceModel")||"").withDeviceMake(a.prop("deviceMake")||"").withAppVersion(a.prop("appVersion")||
"").withStage(a.prop("stage")).withClientId(a.prop("clientId")).withSushiSourceGroupEndpoint(a.prop("sushiSourceGroupEndpoint")).build();h.reportAceVideoResponseReceived();n=k.initialize(n.get(0),h);f.initialize(e,h,n);a.prop("trackingPixelUrl")&&m.$.ajax({url:a.prop("trackingPixelUrl"),type:"GET",crossDomain:!0})})});"use strict";r.when("A","sbv-sushi-client").register("sbv-metrics-manager",function(m,t){function k(g){function h(n){var d=m.$.extend({},f);d[a.EVENT_TYPE]=n;d[a.METRICS_SEQUENCE_NUMBER]=
e++;d[a.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return d}function n(a,n){d&&d.processEvent(a,b);v&&v.processEvent(a)}var e=0,d=t.newClient(l,g,"AceVisClientMetrics"),f=null,v=null;this.setSushiClient=function(a){d=a};this.setDefaultEventAttributes=function(n){f=m.$.extend({},n);f[a.USER_AGENT]=navigator.userAgent};this.setAutomatedTestMetricsClient=function(a){v=a};this.reportAceVideoResponseReceived=function(){var a=h(c.ACE_VIDEO_RESPONSE_RECEIVED);n(a)};this.reportPreviewImageLoadSuccess=
function(d,p){var e=h(c.PREVIEW_IMAGE_LOAD_SUCCESS);e[a.LOAD_TIME_MS]=d;e[a.RETRY_COUNT]=p;n(e)};this.reportPreviewImageLoadFailure=function(d,p){var e=h(c.PREVIEW_IMAGE_LOAD_FAILURE);e[a.LOAD_TIME_MS]=d;e[a.STATUS_CODE]=p;n(e)};this.reportVideoReadyForPlayback=function(d,p,e){var b=h(c.VIDEO_READY_FOR_PLAYBACK);b[a.LOAD_TIME_MS]=d;b[a.RETRY_COUNT]=p;b[a.PERCENT_DOWNLOADED]=e;n(b)};this.reportVideoPlaybackInitiated=function(d){var p=h(c.VIDEO_PLAYBACK_INITIATED);p[a.VIDEO_CURRENT_TIME_MS]=d;n(p)};
this.reportVideoPlaybackStarted=function(d,p,e){var b=h(c.VIDEO_PLAYBACK_STARTED);b[a.VIDEO_CURRENT_TIME_MS]=d;b[a.PERCENT_DOWNLOADED]=p;b[a.DROPPED_FRAMES]=e;n(b)};this.reportTimeToFirstFrame=function(d,p,e){var b=h(c.TIME_TO_FIRST_FRAME);b[a.LOAD_TIME_MS]=d;b[a.PERCENT_DOWNLOADED]=p;b[a.DROPPED_FRAMES]=e;n(b)};this.reportVideoBufferingStarted=function(d,p,e){var b=h(c.VIDEO_BUFFERING_STARTED);b[a.VIDEO_CURRENT_TIME_MS]=d;b[a.PERCENT_DOWNLOADED]=p;b[a.DROPPED_FRAMES]=e;n(b)};this.reportVideoBufferingEnded=
function(d,p,b){var e=h(c.VIDEO_BUFFERING_ENDED);e[a.VIDEO_CURRENT_TIME_MS]=d;e[a.PERCENT_DOWNLOADED]=p;e[a.DROPPED_FRAMES]=b;n(e)};this.reportVideoPlaybackFailure=function(d,e,b){var g=h(c.VIDEO_PLAYBACK_FAILURE);g[a.VIDEO_CURRENT_TIME_MS]=d;g[a.ERROR_MESSAGE]=e;g[a.ERROR_CODE]=b;n(g)};this.reportVideoDurationPlayed=function(d,e,b){var g=h(c.VIDEO_DURATION_PLAYED);g[a.VIDEO_BOUNDRY_CROSSED_TIME_MS]=d;g[a.PERCENT_DOWNLOADED]=e;g[a.DROPPED_FRAMES]=b;n(g)};this.reportPlaybackCompleted=function(d,e){var b=
h(c.PLAYBACK_COMPLETED);b[a.VIDEO_CURRENT_TIME_MS]=d;b[a.DROPPED_FRAMES]=e;n(b)};this.reportVideoOnScreen=function(d){var b=h(c.VIDEO_ON_SCREEN);b[a.PERCENT_DOWNLOADED]=d;n(b)};this.reportVideoOffScreen=function(d,b,e){var g=h(c.VIDEO_OFF_SCREEN);g[a.TIME_ON_SCREEN_MS]=d;g[a.WAS_BUFFERING]=b;g[a.VIDEO_CURRENT_TIME_MS]=e;n(g)};this.reportVideoView=function(b,e){var g=h(c.VIDEO_VIEW);g[a.CONTINUOUS_PLAYBACK_DURATION_MS]=b;n(g);e&&d&&d.flush(d,!0)};this.reportVideoPauseInitiated=function(d){var b=h(c.VIDEO_PAUSED_INITIATED);
b[a.VIDEO_CURRENT_TIME_MS]=d;n(b)};this.reportVideoPaused=function(d,b,e){var g=h(c.VIDEO_PAUSED);g[a.VIDEO_CURRENT_TIME_MS]=d;g[a.PERCENT_DOWNLOADED]=b;g[a.DROPPED_FRAMES]=e;n(g)};this.reportVideoSoundOn=function(d,b){var e=h(c.VIDEO_SOUND_ON);e[a.VIDEO_CURRENT_TIME_MS]=d;e[a.SOUND_TOGGLE_METHOD]=b;n(e)};this.reportVideoSoundOff=function(d,b){var e=h(c.VIDEO_SOUND_OFF);e[a.VIDEO_CURRENT_TIME_MS]=d;e[a.SOUND_TOGGLE_METHOD]=b;n(e)};this.reportVideoClicked=function(d){var b=h(c.VIDEO_CLICKED);b[a.VIDEO_CURRENT_TIME_MS]=
d;n(b)};this.reportProductClicked=function(d){var b=h(c.PRODUCT_CLICKED);b[a.VIDEO_CURRENT_TIME_MS]=d;n(b)};this.reportBlankScreenLoadFailure=function(){var a=h(c.BLANK_SCREEN_LOAD_FAILURE);n(a)};this.reportPlaybackFailedToStartAfterPlay=function(){var a=h(c.PLAYBACK_FAILED_TO_START_AFTER_PLAY);n(a)};this.reportVideoAborted=function(d){var b=h(c.VIDEO_ABORTED);b[a.VIDEO_CURRENT_TIME_MS]=d;n(b)};this.reportVideoSuspended=function(d){var b=h(c.VIDEO_SUSPENDED);b[a.VIDEO_CURRENT_TIME_MS]=d;n(b)};this.reportVideoPlayPromiseRejected=
function(d){var b=h(c.VIDEO_PLAY_PROMISE_REJECTED);b[a.ERROR_MESSAGE]=d;n(b)}}function f(){function b(){var g=[];g[a.METRICS_IDENTIFIER]=h;g[a.WIDGET_INDEX]=n;g[a.DEVICE_PLATFORM]=e;g[a.DEVICE_PLATFORM_VERSION]=d;g[a.DEVICE_MODEL]=c;g[a.DEVICE_MAKE]=f;g[a.APP_VERSION]=u;g[a.STAGE]=p;g[a.CLIENT_ID]=m;return g}var h=q,n=q,e=q,d=q,c=q,f=q,u=q,p=q,m=q,l="https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",x=q,t=q;this.withMetricsIdentifier=function(a){h=a;return this};this.withWidgetIndex=
function(a){n=a;return this};this.withDevicePlatform=function(a){e=a;return this};this.withDevicePlatformVersion=function(a){d=a;return this};this.withDeviceModel=function(a){c=a;return this};this.withDeviceMake=function(a){f=a;return this};this.withAppVersion=function(a){u=a;return this};this.withStage=function(a){p=a;return this};this.withClientId=function(a){m=a;return this};this.withSushiSourceGroupEndpoint=function(a){l=a||"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events";
return this};this.withAutomatedTestMetricsClient=function(a){x=a;return this};this.build=function(){t=new k(l);x!==q&&t.setAutomatedTestMetricsClient(x);t.setDefaultEventAttributes(b());return t}}var c={ACE_VIDEO_RESPONSE_RECEIVED:"AceVideoResponseReceived",BLANK_SCREEN_LOAD_FAILURE:"BlankScreenLoadFailure",PLAYBACK_COMPLETED:"PlaybackCompleted",PREVIEW_IMAGE_LOAD_FAILURE:"PreviewImageLoadFailure",PREVIEW_IMAGE_LOAD_SUCCESS:"PreviewImageLoadSuccess",PRODUCT_CLICKED:"ProductClicked",TIME_TO_FIRST_FRAME:"TimeToFirstFrame",
VIDEO_BUFFERING_ENDED:"VideoBufferingEnded",VIDEO_BUFFERING_STARTED:"VideoBufferingStarted",VIDEO_CLICKED:"VideoClicked",VIDEO_DURATION_PLAYED:"VideoDurationPlayed",VIDEO_OFF_SCREEN:"VideoOffScreen",VIDEO_ON_SCREEN:"VideoOnScreen",VIDEO_PAUSED:"VideoPaused",VIDEO_PAUSED_INITIATED:"VideoPausedInitiated",VIDEO_PLAYBACK_FAILURE:"VideoPlaybackFailure",VIDEO_PLAYBACK_INITIATED:"VideoPlaybackInitiated",VIDEO_PLAYBACK_STARTED:"VideoPlaybackStarted",VIDEO_READY_FOR_PLAYBACK:"VideoReadyForPlayback",VIDEO_SOUND_OFF:"VideoSoundOff",
VIDEO_SOUND_ON:"VideoSoundOn",VIDEO_VIEW:"VideoView",PLAYBACK_FAILED_TO_START_AFTER_PLAY:"PlaybackFailedToStartAfterPlay",VIDEO_ABORTED:"VideoAborted",VIDEO_SUSPENDED:"VideoSuspended",VIDEO_PLAY_PROMISE_REJECTED:"VideoPlayPromiseRejected"},a={APP_VERSION:"appVersion",CLIENT_ID:"clientId",CONTINUOUS_PLAYBACK_DURATION_MS:"continuousPlaybackDurationMs",DEVICE_MAKE:"deviceMake",DEVICE_MODEL:"deviceModel",DEVICE_PLATFORM:"devicePlatform",DEVICE_PLATFORM_VERSION:"devicePlatformVersion",DROPPED_FRAMES:"droppedFrames",
ERROR_MESSAGE:"errorMessage",ERROR_CODE:"errorCode",EVENT_TYPE:"eventType",LOAD_TIME_MS:"loadTimeMs",METRICS_SEQUENCE_NUMBER:"metricsSequenceNumber",METRICS_IDENTIFIER:"metricsIdentifier",NETWORK_TYPE:"networkType",PERCENT_DOWNLOADED:"percentDownloaded",RETRY_COUNT:"retryCount",SOUND_TOGGLE_METHOD:"soundToggleMethod",STAGE:"stage",STATUS_CODE:"statusCode",TIME_ON_SCREEN_MS:"timeOnScreenMs",USER_AGENT:"userAgent",VIDEO_BOUNDRY_CROSSED_TIME_MS:"videoBoundaryCrossedTimeMs",VIDEO_CURRENT_TIME_MS:"videoCurrentTimeMs",
WAS_BUFFERING:"wasBuffering",WIDGET_INDEX:"widgetIndex"},b={n:1};return{EVENT_TYPES:c,SOUND_TOGGLE_OFF_CAUSE:{ICON_TAP:"IconTap",VIDEO_OFF_SCREEN:"VideoOffScreen"},SOUND_TOGGLE_ON_CAUSE:{ICON_TAP:"IconTap"},DEFAULT_SUSHI_SOURCE_GROUP_ENDPOINT:"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client.prod.events",builder:function(){return new f}}});r.register("sbv-transportation-client",function(){var m=function(){},t=function(){function f(){if(l.XDomainRequest){var c=new l.XDomainRequest;c.onerror=
m;c.ontimeout=m;c.onprogress=m;c.onload=m;c.timeout=0;return c}if(l.XMLHttpRequest){c=new l.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null}return{send:function(c,a){if(a&&c){var b=f();if(!b)throw"";b.open("POST",c,!0);b.setRequestHeader&&b.setRequestHeader("Content-type","text/plain");b.send(a)}},isSupported:!0}}(),k=function(){return{send:function(f,c){if(f&&c&&!l.navigator.sendBeacon(f,c))throw"";},isSupported:!!l.navigator.sendBeacon}}();return{ajaxClient:t,beaconClient:k}});
r.when("sbv-transportation-client","sbv-event-manager").register("sbv-sushi-client",function(m,t){function k(c,a,b){this.endpoint=a;this.window=c;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=m;var g=this;this.compressor=function(a){function b(d){if(d)switch(typeof d){case "number":return!(isNaN(d)||
Infinity===d)&&d.toString().length>a.dictionaryIndex.length;case "boolean":break;case "string":return d.length>a.dictionaryIndex.length;default:return!0}return!1}function d(d){a.eventsDictionary[d]="#"+a.dictionaryIndex++;a.reverseEventsDictionary[a.eventsDictionary[d]]=d;return a.eventsDictionary[d]}function h(c){if(b(c)){var g=0;c instanceof Array?g=2:c instanceof Function?g=null:c instanceof Object&&(g=1);switch(g){case 0:return a.eventsDictionary[c]?a.eventsDictionary[c]:d(c);case 2:for(var p=
[],g=0;g<c.length;g++)p[g]=h(c[g]);return p;case 1:g={};for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&(g[a.eventsDictionary[p]?a.eventsDictionary[p]:d(p)]=-1===f.indexOf(p)?h(c[p]):c[p]);return g}}return c}return{compressData:h,buildPOSTObject:function(){return a.stringify({cs:{dct:a.reverseEventsDictionary},events:a.eventsQueue})}}}(this);this.onBeforeUnload=function(){!0!==g.unloadHandlerCalled&&(g.flush(g,!0),g.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(b){}return null};
this.resetBatch=function(){this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.highPriorityTimer=this.lowPriorityTimer=this.batchSize=this.dictionaryIndex=0};this.sendWithClient=function(a){if(null==this.endpoint||""===this.endpoint)this.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var b=this.compressor.buildPOSTObject();return a.send(this.endpoint,b)}throw"";}};this.sendWithPriority=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];try{return this.sendWithClient(b)}catch(d){}}return null};
this.flush=function(a,b){a.eventsQueue.length&&(b||!1!==a.window.navigator.onLine)&&(b=a.eventsQueue.length,a.sendWithPriority(a.transportationClient.beaconClient,a.transportationClient.ajaxClient),a.resetBatch(),a.ueCount("EventsSent",b))};this.startHighPriorityQueueTimer=function(){0===this.highPriorityFlushInterval?this.flush(this,!1):this.highPriorityTimer||(this.highPriorityTimer=setTimeout(this.flush,this.highPriorityFlushInterval,this,!1))};this.startLowPriorityQueueTimer=function(){this.lowPriorityTimer||
(this.lowPriorityTimer=setTimeout(this.flush,this.lowPriorityFlushInterval,this,!1))};this.generateMessageId=function(a,b){return a+"-"+b+"-"+this.eventSequence};this.getCurrentISODate=function(){var a=new Date,b=function(a){return 10>a?"0"+a:a};return Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};
this.decorateEvent=function(a){a.timestamp=this.getCurrentISODate();a.sequence=this.eventSequence;a.messageId=this.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?this.startHighPriorityQueueTimer():this.startLowPriorityQueueTimer()};this.encodeEvent=function(a,b,d){b=b.length;(499===this.eventsQueue.length||524288<this.batchSize+b)&&this.flush(this,!0);this.batchSize+=b;a={data:this.compressor.compressData(a)};this.eventsQueue.push(a);this.startTimers(d)};
this.addEvent=function(a,b){this.decorateEvent(a,b);var d=this.stringify(a);return d?(this.encodeEvent(a,d,b),!0):!1};this.isValidAPIParam=function(a,b){return a&&-1<a.constructor.toString().indexOf(b)};this.isMaxCallsReached=function(){this.eventSequence++;1E3<this.eventSequence&&this.ueCount("SushiClientMaxCallsReached");return 1E3<this.eventSequence};this.isValidAPICall=function(a){return!this.isMaxCallsReached()&&this.isValidAPIParam(a,"Object")};this.ueCount=function(a,c){if("undefined"!==typeof ue&&
ue&&ue.count)return c=0===c?0:c||(ue.count(b+":"+a)||0)+1,ue.count(b+":"+a,c),c};this.processEvent=function(a,b){var d=this.unloadHandlerCalled=!1;this.options=b||{};this.isValidAPICall(a)&&(d=this.addEvent(a,this.options));d?this.ueCount("ClientEventsSuccess"):this.ueCount("ClientEventsFailed");return d};t.addEventListener(l,"beforeunload",100,this.onBeforeUnload);t.addEventListener(document,"visibilitychange",100,this.onBeforeUnload);t.addEventListener(l,"blur",100,this.onBeforeUnload);t.addEventListener(l,
"pagehide",100,this.onBeforeUnload);l.app||(l.app={});var h=l.app.willDisappear;l.app.willDisappear=function(){h&&h();g.onBeforeUnload()}}var f=["messageId","timestamp"];return{newClient:function(c,a,b){return new k(c,a,b)}}});r.when("A").register("sbv-automated-test-metrics-client",function(m){function l(k){this.videoSingleProduct=k;this.processEvent=function(f){var c=this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR");c===q&&(c=[]);c.push(f);this.videoSingleProduct.data("AUTOMATED_TEST_METRICS_ATTR",
c)}}return{newClient:function(k){return new l(k)}}});r.when("A").register("sbv-platform-compatibility",function(m){function l(){return m.capabilities.isAmazonApp&&m.capabilities.ios}var k=null,f=navigator;return{isIOS:function(){return m.capabilities.ios},isIOSWebView:l,canUseViewWillDisappearToReportMetrics:function(){if(!l()||!k)return!1;var c=k.split(".");if(2>c.length)return!1;var a=parseInt(c[0]),c=parseInt(c[1]);return 13<a||13===a&&18<=c},setAppVersion:function(c){k=c},isSafari:function(){return!(!f.vendor||
!f.vendor.match(/apple/i))},isWebView:function(){return m.capabilities.isAmazonApp},_setNavigator:function(c){f=c}}});r.when("A").register("sbv-single-product",function(m){function l(){this.init=function(k,f,c){m.$(k).find("a").click(function(){f.reportProductClicked(c&&c.getVideoCurrentTimeMs())})}}return{initialize:function(k,f,c){(new l).init(k,f,c)}}});r.register("sbv-retryable",function(){return function(m,l,k,f){function c(){0<g?(g--,a()):(h.cancel(),b())}var a=m,b=f,g=l,h=this;this._init=function(){a();
this._intervalID=setInterval(c,k)};this.cancel=function(){clearInterval(this._intervalID)};this._init()}});r.when("A","sbv-video-mixin").register("sbv-video",function(m,l){var k=function(){this.metricsManager=this.$muteButton=this.videoPlayer=null;this.onScreenStartTime=0};m.mixin(k.prototype,l);return{initialize:function(f,c){var a=new k;a.init(f,c);return a}}});r.when("A","sbv-viewability-manager","sbv-metrics-manager","sbv-video-player-builder","sbv-platform-compatibility").register("sbv-video-mixin",
function(m,l,k,f,c){return{toggleAudio:function(){var a=!this.videoPlayer.isMuted();this.setMuteStatus(a,a?k.SOUND_TOGGLE_OFF_CAUSE.ICON_TAP:k.SOUND_TOGGLE_ON_CAUSE.ICON_TAP)},setMuteButtonStatus:function(a){var b=this.$muteButton;a?(b.addClass("sbv-video-mute-icon"),b.removeClass("sbv-video-unmute-icon")):(b.addClass("sbv-video-unmute-icon"),b.removeClass("sbv-video-mute-icon"))},setMuteStatus:function(a,b){var c=this.videoPlayer,h=this.metricsManager;this.setMuteButtonStatus(a);a?(c.mute(),h&&h.reportVideoSoundOff(c.getCurrentTimeMs(),
b)):(c.unmute(),h&&h.reportVideoSoundOn(c.getCurrentTimeMs(),b))},onOnePercentViewability:function(a,b){a=this.videoPlayer;var c=this.metricsManager;b?(this.onScreenStartTime=this.getCurrentTimeMs(),c.reportVideoOnScreen(a.getPercentDownloaded())):(a.isMuted()||this.setMuteStatus(!0,k.SOUND_TOGGLE_OFF_CAUSE.VIDEO_OFF_SCREEN),b=this.getCurrentTimeMs()-this.onScreenStartTime,c.reportVideoOffScreen(b,0!=this.videoBufferingStartTime,a.getCurrentTimeMs()),this.onScreenStartTime=0,a.seekToStart(),a.resetContinuousPlaybackDurationMs())},
onFiftyPercentViewability:function(a,b){a=this.videoPlayer;var g=this.metricsManager;b?(a.play(),a.resetContinuousPlaybackDurationMs(),g.reportVideoPlaybackInitiated(a.getCurrentTimeMs()),this.viewSessionStartTime=this.getCurrentTimeMs()):(a.pause(),g.reportVideoPauseInitiated(a.getCurrentTimeMs()),g.reportVideoView(a.getContinuousPlaybackDurationMs(),c.isIOSWebView()),a.resetContinuousPlaybackDurationMs(),this.viewSessionBufferingDuration=0)},onVideoReadyForPlayback:function(a,b,c){this.metricsManager.reportVideoReadyForPlayback(a,
b,c)},onVideoPlaybackFailure:function(a,b,c){this.metricsManager.reportVideoPlaybackFailure(a,c,b)},onVideoPlaying:function(a,b,c){this.metricsManager.reportVideoPlaybackStarted(a,b,c)},onVideoPlaybackPaused:function(a,b,c){this.metricsManager.reportVideoPaused(a,b,c)},onVideoBufferingStarted:function(a,b,c){var h=this.metricsManager;this.videoBufferingStartTime=this.getCurrentTimeMs();h.reportVideoBufferingStarted(a,b,c)},getCurrentTimeMs:function(){return Date.now()},onVideoBufferingEnded:function(a,
b,c){var h=this.metricsManager;this.videoBufferingStartTime=0;h.reportVideoBufferingEnded(a,b,c)},onTimeToFirstFrame:function(a,b,c){this.metricsManager.reportTimeToFirstFrame(a,b,c)},onPlaybackCompleted:function(a,b){this.metricsManager.reportPlaybackCompleted(a,b)},onDurationPlayed:function(a,b,c){this.metricsManager.reportVideoDurationPlayed(a,b,c)},onContinuousDurationPlayed:function(a){this.metricsManager.reportVideoView(a,!0)},logClick:function(){var a=this.videoPlayer,b=this.metricsManager;
b&&b.reportVideoClicked(a.getCurrentTimeMs())},getVideoCurrentTimeMs:function(){return this.videoPlayer.getCurrentTimeMs()},onVideoAborted:function(a){var b=this.metricsManager;b&&b.reportVideoAborted(a)},onVideoSuspended:function(a){var b=this.metricsManager;b&&b.reportVideoSuspended(a)},onVideoPlayPromiseRejected:function(a){var b=this.metricsManager;b&&b.reportVideoPlayPromiseRejected(a)},init:function(a,b){function g(a,d,b){e.onDurationPlayed(a,d,b)}function h(a){e.onContinuousDurationPlayed(a)}
a=m.$(a);var n=a.find("video:first").get(0),e=this;e.metricsManager=b;var d=f.builder(n).withVideoReadyForPlaybackHandler(function(a,d,b){e.onVideoReadyForPlayback(a,d,b)}).withTimeToFirstFrameHandler(function(a,d,b){e.onTimeToFirstFrame(a,d,b)}).withVideoPlaybackFailureHandler(function(a,d,b){e.onVideoPlaybackFailure(a,d,b)}).withVideoPlayingHandler(function(a,d,b){e.onVideoPlaying(a,d,b)}).withVideoPlaybackPausedHandler(function(a,d,b){e.onVideoPlaybackPaused(a,d,b)}).withPlaybackCompletedHandler(function(a,
d){e.onPlaybackCompleted(a,d)}).withVideoBufferingStartedHandler(function(a,d,b){e.onVideoBufferingStarted(a,d,b)}).withVideoBufferingEndedHandler(function(a,d,b){e.onVideoBufferingEnded(a,d,b)}).withVideoPlayedToBoundaryHandler(2E3,g).withVideoPlayedToBoundaryHandler(15E3,g).withVideoPlaybackFailedAfterPlayErrorCallback(function(){b.reportPlaybackFailedToStartAfterPlay()}).withVideoAbortedHandler(function(a){e.onVideoAborted(a)}).withVideoSuspendedHandler(function(a){e.onVideoSuspended(a)}).withVideoPlayPromiseRejectedHandler(function(a){e.onVideoPlayPromiseRejected(a)});
c.isIOSWebView()&&!c.canUseViewWillDisappearToReportMetrics()&&(d=d.withVideoPlayedToContinuousBoundaryHandler(2E3,h));d=d.build();c.isIOS()&&d.forcePreload();var k=a.find('[data-itemid\x3d"sbv-video-mute"]'),v=a.find('[data-itemid\x3d"sbv-video-mute-click-region"]');e.videoPlayer=d;e.$muteButton=k;a.find("a").click(function(){e.logClick()});e.setMuteButtonStatus(d.isMuted());v.click(function(){e.toggleAudio()});l.registerElement(n,.5,!0,!0,!0,function(a,d){e.onFiftyPercentViewability(a,d)});l.registerElement(n,
.01,!0,!0,!0,function(a,d){e.onOnePercentViewability(a,d)})}}});"use strict";r.when("sbv-retryable","sbv-platform-compatibility").register("sbv-video-player-builder",function(m,l){function k(a){var c=0,f=0,e=!1;this._videoElement=a;this._onVideoBufferingEnded=this._onVideoBufferingStarted=this._onPlaybackCompleted=this._onPlaybackPaused=this._onVideoPlaying=this._onVideoPlaybackFailure=this._onTimeToFirstFrame=this._onVideoReadyForPlayback=q;this._lastOnTimeUpdateCurrentTimeMs=0;this._boundaryChecks=
[];this._continuousDurationBoundaryChecks=[];this._retryable=null;this._registerEventListeners=function(){var a=this,g=this._videoElement;g.oncanplay=function(){return a._handleVideoReadyForPlaybackEvent()};g.onerror=function(){!a._assetLoaded&&3>a._retryLoadCount?(a._retryLoadCount+=1,a._reload(2E3)):a._handleVideoPlaybackFailureEvent()};g.onplaying=function(){a._handleFirstFramePlayedEvent();a._playbackstate===b.BUFFERING&&a._onVideoBufferingEnded(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());
a._playbackstate!==b.END&&a._onVideoPlaying(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames());a._playbackstate=b.PLAYING};g.onpause=function(){e&&a._videoElement.currentTime!==a._videoElement.duration&&(a._playbackstate=b.PAUSED,a._onPlaybackPaused(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames()))};g.onended=function(){a._playbackstate=b.END;var g=a.getDurationMs();f+=g-c;c=0;a._onPlaybackCompleted(a.getDurationMs(),a.getDroppedFrames());a._videoElement.play()};
g.onwaiting=function(){a._playbackstate=b.BUFFERING;a._onVideoBufferingStarted(a.getCurrentTimeMs(),a.getPercentDownloaded(),a.getDroppedFrames())};g.ontimeupdate=function(){a.cancelPlayRetryable();var b=a.getCurrentTimeMs(),c=a.getContinuousPlaybackDurationMs();a._continuousDurationBoundaryChecks.forEach(function(a){a.reportIfBoundaryCrossed(c)});a._boundaryChecks.forEach(function(c){c.reportIfBoundaryCrossed(a._lastOnTimeUpdateCurrentTimeMs,b,a.getDurationMs(),a.getPercentDownloaded(),a.getDroppedFrames())});
a._lastOnTimeUpdateCurrentTimeMs=b};g.onabort=function(){var b=a.getCurrentTimeMs();a._onAborted(b)};g.onsuspend=function(){var b=a.getCurrentTimeMs();a._onSuspended(b)}};this._getDateTime=function(){return Date.now()};this._playInternal=function(){e=!0;this._initiatedPlayTime||(this._initiatedPlayTime=this._getDateTime());var a=this._videoElement.play(),b=this;a&&a.catch(function(a){var c="Unknown";"string"===typeof a?c=a:a instanceof DOMException&&(c=a.name+": "+a.message);b._onVideoPlayPromiseRejected(c)})};
this.cancelPlayRetryable=function(){this._retryable&&(this._retryable.cancel(),this._retryable=null)};this._init=function(){this._playbackstate=b.INITIATED;this._loadStartTime=this._getDateTime();this._assetLoaded=!1;this._retryLoadCount=0;this._firstFramePlayed=!1;this._initiatedPlayTime=q};this._init();this._registerEventListeners();this._handleVideoReadyForPlaybackEvent=function(){if(!this._assetLoaded){var a=this._getDateTime()-this._loadStartTime;this._onVideoReadyForPlayback(a,this._retryLoadCount,
this.getPercentDownloaded());this._assetLoaded=!0}};this._handleFirstFramePlayedEvent=function(){if(!this._firstFramePlayed){var a=this._getDateTime()-this._initiatedPlayTime;this._onTimeToFirstFrame(a,this.getPercentDownloaded(),this.getDroppedFrames());this._firstFramePlayed=!0}};this._handleVideoPlaybackFailureEvent=function(){var a=this._videoElement;if(a.error){var b="UNKNOWN";if(a.error.code)switch(a.error.code){case 1:b="MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b=
"MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:b=a.error.code.toString()}this._onVideoPlaybackFailure(this.getCurrentTimeMs(),b,a.error.message)}};this.addVideoReadyForPlaybackListener=function(a){this._onVideoReadyForPlayback=a;4==this._videoElement.readyState&&(this._onVideoReadyForPlayback(0,0,this.getPercentDownloaded()),this._assetLoaded=!0)};this.play=function(){if(l.isIOS()){var a=this;this._retryable&&this.cancelPlayRetryable();this._retryable=new m(function(){a._playInternal()},
10,200,function(){a._assetLoaded&&null!=a._playbackFailedAfterPlayErrorCallback&&a._playbackFailedAfterPlayErrorCallback()})}else this._playInternal()};this.pause=function(){this.cancelPlayRetryable();this._videoElement.pause()};this.seekToStart=function(){var a=this.getCurrentTimeMs();f+=a-c;this._lastOnTimeUpdateCurrentTimeMs=c=0;this._videoElement.currentTime=0};this.mute=function(){this._videoElement.muted=!0};this.unmute=function(){this._videoElement.muted=!1};this.isMuted=function(){return this._videoElement.muted};
this.getSrc=function(){return this._videoElement.currentSrc};this.getCurrentTimeMs=function(){return Math.round(1E3*this._videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*this._videoElement.duration)};this.getDroppedFrames=function(){return this._videoElement.getVideoPlaybackQuality?this._videoElement.getVideoPlaybackQuality().droppedVideoFrames:this._videoElement.webkitDroppedFrameCount!=q?this._videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=
function(){return f+(this.getCurrentTimeMs()-c)};this.resetContinuousPlaybackDurationMs=function(){var a=this.getCurrentTimeMs();f=0;c=a===this.getDurationMs()?0:a;this._continuousDurationBoundaryChecks.forEach(function(a){a.resetReported()})};this.getPercentDownloaded=function(){var a=this._videoElement.buffered,b=0;if(a){for(var c=0;c<a.length;c++)b+=a.end(c)-a.start(c);return b/this._videoElement.duration}return 0};this.forcePreload=function(){this._videoElement.play();this._videoElement.pause()};
this._reload=function(a){var b=this._videoElement,c=this.getSrc();setTimeout(function(){b.src=c},a)}}function f(a,b){this.reportIfBoundaryCrossed=function(c,e,d,f,k){!isNaN(a)&&0<=a&&a<=d&&(c<=e?a>c&&a<=e&&b(a,f,k):(0<a&&a<=e||a>c&&a<=d)&&b(a,f,k))}}function c(a,b){var c=!1;this.resetReported=function(){c=!1};this.reportIfBoundaryCrossed=function(e){var d;if(d=!c)d=!isNaN(a)&&0<=a&&a<e;d&&(c=!0,b(e))}}function a(a){this._videoPlayer=new k(a);this.withVideoReadyForPlaybackHandler=function(a){this._videoPlayer.addVideoReadyForPlaybackListener(a);
return this};this.withTimeToFirstFrameHandler=function(a){this._videoPlayer._onTimeToFirstFrame=a;return this};this.withVideoPlaybackFailureHandler=function(a){this._videoPlayer._onVideoPlaybackFailure=a;return this};this.withVideoPlayingHandler=function(a){this._videoPlayer._onVideoPlaying=a;return this};this.withVideoPlaybackPausedHandler=function(a){this._videoPlayer._onPlaybackPaused=a;return this};this.withPlaybackCompletedHandler=function(a){this._videoPlayer._onPlaybackCompleted=a;return this};
this.withVideoBufferingStartedHandler=function(a){this._videoPlayer._onVideoBufferingStarted=a;return this};this.withVideoBufferingEndedHandler=function(a){this._videoPlayer._onVideoBufferingEnded=a;return this};this.withVideoPlayedToBoundaryHandler=function(a,b){this._videoPlayer._boundaryChecks.push(new f(a,b));return this};this.withVideoPlayedToContinuousBoundaryHandler=function(a,b){this._videoPlayer._continuousDurationBoundaryChecks.push(new c(a,b));return this};this.withVideoPlaybackFailedAfterPlayErrorCallback=
function(a){this._videoPlayer._playbackFailedAfterPlayErrorCallback=a;return this};this.withVideoAbortedHandler=function(a){this._videoPlayer._onAborted=a;return this};this.withVideoSuspendedHandler=function(a){this._videoPlayer._onSuspended=a;return this};this.withVideoPlayPromiseRejectedHandler=function(a){this._videoPlayer._onVideoPlayPromiseRejected=a;return this};this.build=function(){var a=this._videoPlayer;if(a._onVideoReadyForPlayback&&a._onTimeToFirstFrame&&a._onVideoPlaybackFailure&&a._onVideoPlaying&&
a._onPlaybackPaused&&a._onPlaybackCompleted&&a._onVideoBufferingStarted&&a._onVideoBufferingEnded&&a._onAborted&&a._onSuspended&&a._onVideoPlayPromiseRejected)return this._videoPlayer;throw Error("Need implements all event listeners");}}var b={PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",INITIATED:"initiated",END:"ended"};return{builder:function(b){return new a(b)}}});r.register("sbv-event-manager",function(){function m(f){var c=0,a;for(a in f)c++;return c}function l(f,c){return function(a){k[f][c].listeners.forEach(function(b){b.callback&&
b.callback(a)})}}var k={};return{addEventListener:function(f,c,a,b){k[f]||(k[f]={});k[f][c]||(k[f][c]={listeners:[],generatedCallback:l(f,c)},f.addEventListener(c,k[f][c].generatedCallback));k[f][c].listeners.push({priority:a,callback:b});k[f][c].listeners.sort(function(a,b){return a.priority-b.priority})},removeEventListener:function(f,c,a,b){k[f]&&k[f][c]&&(k[f][c].listeners=k[f][c].listeners.filter(function(c){return c.priority!==a||c.callback!==b}),0===k[f][c].listeners.length&&(f.removeEventListener(c,
k[f][c].generatedCallback),delete k[f][c],m(k[f])&&delete k[f]))}}});"use strict";r.when("A","amzn-safe-frame-viewability","sbv-platform-compatibility","sbv-event-manager").register("sbv-viewability-manager",function(m,q,k,f){function c(a,b){a.isInView=b;a.callback(a.ratio,b);a.recurring||r(a.element,a.ratio,a.dispatchOnElementInView,a.dispatchOnElementOutOfView,a.recurring)}function a(a,b){a.dispatchOnElementInView&&b>=a.ratio&&!a.isInView&&c(a,!0);a.dispatchOnElementOutOfView&&b<a.ratio&&a.isInView&&
c(a,!1)}function b(b){a(b,0)}function g(b){var c=q.geom(b.element);a(b,c&&c.self&&c.self.iv||0)}function h(){u.forEach(b)}function n(){u.forEach(g)}function e(){document.hidden?h():setTimeout(n,50)}function d(){h();n()}function r(a,b,c,g,q){var t=u.length;u=u.filter(function(d){return!(d.element===a&&d.ratio===b&&d.dispatchOnElementInView===c&&d.dispatchOnElementOutOfView===g&&d.recurring===q)});0===u.length&&(m.off("afterReady",p),m.off(m.constants.BROWSER_EVENTS.SCROLL,p),m.off(m.constants.BROWSER_EVENTS.RESIZE,
p),m.off(m.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,p),f.removeEventListener(document,"visibilitychange",1,e),f.removeEventListener(l,"beforeunload",1,h),k.isIOSWebView()||(f.removeEventListener(l,"focus",1,n),f.removeEventListener(l,"blur",1,h)),k.isSafari()&&!k.isWebView()&&(f.removeEventListener(l,"pagehide",1,h),f.removeEventListener(l,"pageshow",1,n),f.removeEventListener(l,"popstate",1,d)));return t!==u.length}function v(){k.canUseViewWillDisappearToReportMetrics()&&!y&&(y=!0,l.app||(l.app=
{}),w=l.app.willDisappear,l.app.willDisappear=function(){h();w&&w()})}var u=[],p,w,y=!1;p=m.throttle(function(){u.forEach(g)},50);return{registerElement:function(a,b,c,q,r,t){a={element:a,ratio:b,dispatchOnElementInView:c,dispatchOnElementOutOfView:q,recurring:r,callback:t};0===u.length&&(m.on("afterReady",p),m.on(m.constants.BROWSER_EVENTS.SCROLL,p),m.on(m.constants.BROWSER_EVENTS.RESIZE,p),m.on(m.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,p),f.addEventListener(document,"visibilitychange",1,e),
k.isIOSWebView()||(f.addEventListener(l,"focus",1,n),f.addEventListener(l,"blur",1,h)),k.isSafari()&&!k.isWebView()&&(f.addEventListener(l,"pagehide",1,h),f.addEventListener(l,"pageshow",1,n),f.addEventListener(l,"popstate",1,d)),v());u.push(a);g(a);return a},deregisterElement:r,_handleRatioInViewChange:a,_onBrowserVisibilityChange:e}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("SearchQuestionAnswerWidgetAssets",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("A","ready").execute("aspa-partial-collapse-expander",function(a){a.on("a:expander:qna_answer_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-partial-collapse-header").addClass("aok-hidden");a.expander.$expander.find(".a-expander-partial-collapse-content").addClass("aspa-padding-none")});
a.on("a:expander:qna_question_expander:toggle:expand",function(a){a.expander.$expander.find(".a-expander-section-header").addClass("a-text-bold");b.when("a-expander").execute("aspa-question-expander",function(a){a.initializeExpanders()})});a.on("a:expander:qna_question_expander:toggle:collapse",function(a){a.expander.$expander.find(".a-expander-section-header").removeClass("a-text-bold")})});"use strict";b.when("jQuery","rush-framework").register("aspa-voting-component",function(a,b){function c(b){var e=
a(b.currentTarget),f=e.closest(".aspa-feedback-container"),d=f.find(".aspa-vote-buttons"),g=f.find(".aspa-loading-section"),k=f.find(".aspa-success-section"),h=f.find(".aspa-error-section"),f=e.attr("action"),l=e.attr("method"),m=e.serializeArray();b.preventDefault();a.ajax({url:f,type:l,data:m,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"},beforeSend:function(){d.addClass("aok-hidden");h.addClass("aok-hidden");g.removeClass("aok-hidden")},success:function(){k.removeClass("aok-hidden")},
error:function(a){401===a.status?(e.unbind("submit"),e.submit()):(d.removeClass("aok-hidden"),h.removeClass("aok-hidden"))},complete:function(a){401!==a.status&&g.addClass("aok-hidden")}})}b.registerComponent("aspa-voting-component","aspa-voting-component",function(b){a(b.elem()).find(".aspa-vote-form").submit(c)})})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("PantryCPIMobileAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("GuidedNavigationWidgetAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(f){var c=window.AmazonUIPageJS||window.P,h=c._namespace||c.attributeErrors,a=h?h("SearchWebVSEVideoWidgetAssets",""):c;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,c,h){f.register("vse-search-utils",function(){return{postCountMetric:function(a){var b,d;"undefined"!==typeof a&&(b=c.ue)&&(d=b.count(a)||0,b.count(a,d+1))},postTimeMetric:function(a,b){var d;"undefined"!==typeof a&&"undefined"!==typeof b&&(d=c.ue)&&d.count(a,b)},logError:function(a,b,
d,f){c.ueLogError&&c.ueLogError(f,{logLevel:a,attribution:b,message:d})},hideWidget:function(a){a.$(".vse-search-widget-container").addClass("aok-hidden");a.trigger("vse:search:ajax:failed")},isScrolledIntoView:function(a,b){var d=a.$(c);a=d.scrollTop();var d=a+d.height(),f=b.offset().top+.4*b.height();return b.offset().top+.6*b.height()<=d&&f>=a}}});f.when("vse-search-utils").execute("vse-search-ajax-calls",function(a){try{var b=-1===c.location.host.indexOf(".proxy.amazon.com")?"/vap/ew/":"https://www.amazon.com/vap/ew/",
d=4E3,h=500,u=599,q=3,g="vse_search:ajax:success:",r="vse_search:ajax:error:"}catch(m){a.logError("FATAL","vse_search","[Domain] not decided ",m)}f.register("vse-search-ajaxCallHook",function(){function f(k,c){try{var e=k.A,l=k.request,p=k.handleFailure,t=k.handleSuccess;c--;var n=q-c-1,w=e.now();e.ajax(b+"/subcomponent/relatedvideosanywhere",{params:l,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:l.timeout||d,withCredentials:!0,success:function(b){var d=
e.now()-w;a.postTimeMetric(g,d);a.postCountMetric(g+l.page+":"+l.placement+":"+n);t(e,l,b)},error:function(b){a.postCountMetric(r+l.page+":"+l.placement+":"+n);(0===b.http.status||b.http.status>=h&&b.http.status<=u)&&0<c?f(k,c):(a.postCountMetric(r),p(e,b))}})}catch(x){a.logError("FATAL","vse_search","[vse_search_ajax] ",x)}}return{get:function(a,b,e,d){f({A:a,request:b,handleFailure:d,handleSuccess:e},q)}}})});"use strict";f.when("A","vse-search-utils","vse-search-ajaxCallHook","rush-framework").register("vse-search-widget",
function(a,b,d,c){function f(a,d,c){try{g&&(a.$(g).find(".vse-search-widget .vse-search-widget-data").html(c),a.trigger("vse:search:ajax:suceeded"))}catch(h){b.hideWidget(a)}}function h(a){b.hideWidget(a)}var g;c.registerComponent("vse-search-widget","vse-search-widget",function(c){try{var m=!1,k=a.now();b.postTimeMetric("vse-search-preload-load-time",k);g=c.elem();c=function n(){if(g&&(m&&a.off("scroll",n),!m&&b.isScrolledIntoView(a,a.$(g)))){var c=a.now()-k;a.$(g).find(".vse-search-spinner").hasClass("aok-hidden")?
(b.postCountMetric("vse-search-preload.widgetViewedAndLoadedCount"),b.postTimeMetric("vse-search-preload.widgetViewedAndLoadedDuration",c)):(b.postCountMetric("vse-search-preload.widgetViewedNotLoadedCount"),b.postTimeMetric("vse-search-preload.widgetViewedNotLoadedDuration",c));b.postTimeMetric("vse-search-preload.pageLoadToWidgetViewedDuration",c);m=!0}};c();a.on("scroll",c);var v=atob(a.$(g).attr("data-page-state")),e=JSON.parse(v),l=e.clientPrefix;if(e){var p={requester:e.requester,marketplaceID:e.marketplaceID,
clientPrefix:e.clientPrefix,locale:e.locale,page:e.page,count:e.count,placement:e.placement,device:e.device,metadata:e.metadata,videoDataList:e.videoDataList,productList:e.productList};a.on(l+":vse:relatedvideos:asset:registered",function(){g&&(a.$(g).find(".vse-search-spinner, .vse-search-placeholder-data").addClass("aok-hidden"),a.$(g).find(".vse-search-widget .vse-search-widget-data").removeClass("aok-hidden").animate({opacity:1},400,function(){var c=a.now();b.postTimeMetric("vse-search-preload-shown-time",
c);b.postTimeMetric("vse-search-preload-spinner-time",c-k);a.trigger("vse-search-widget-shown:completed")}))});d.get(a,p,f,h)}else h(a),b.postCountMetric("vse-search-preload-page-state-not-found")}catch(t){b.hideWidget(a)}})})});
/* ******** */
(function(f){var d=window.AmazonUIPageJS||window.P,g=d._namespace||d.attributeErrors,e=g?g("SearchFollowButtonAssets",""):d;e.guardFatal?e.guardFatal(f)(e,window):e.execute(function(){f(e,window)})})(function(f,d,g){f.when("jQuery","rush-framework").register("rdx-follow-button",function(e,f){function l(a){d.ue&&d.ue.tag&&d.ue.count&&(d.ue.tag(a,"searchEntityFollow"),d.ue.count(a+"Count",1))}function m(a){a.removeClass("aok-hidden")}f.registerComponent("rdx-follow-button","rdx-follow-button",function(a){function f(c){b.removeClass("rdx-follow-button-is-following");
b.find("button .rdx-follow-button-text").text(h);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){q(c)});m(b)}function n(c){b.addClass("rdx-follow-button-is-following");b.find("button .rdx-follow-button-text").text(p);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-follow-icon").addClass("rdx-follow-button-following-icon");b.unbind().click(function(){u(c)});m(b)}function v(){b.removeClass("rdx-follow-button-is-following");
b.find("button .rdx-follow-button-text").text(h);b.find("button .rdx-follow-button-icon").removeClass("rdx-follow-button-following-icon").addClass("rdx-follow-button-follow-icon");b.unbind().click(function(){"undefined"!==typeof sessionStorage&&(sessionStorage.followKey=k);d.location.href=w});m(b)}function q(c){e.ajax({type:"POST",url:x,data:{authenticity_token:c,entity_id:k,category:r},success:function(){n(c)},error:function(){f();t.removeClass("aok-hidden");l("EntityFollowError")}})}function u(c){e.ajax({type:"POST",
url:y,data:{_method:"delete",authenticity_token:c},success:function(){f(c)},error:function(){n(c);t.removeClass("aok-hidden");l("EntityUnfollowError")}})}function z(){e.ajax({type:"GET",url:A,data:{},success:function(c){if(c.isFollowable)if(c.signedIn)if(c.isFollowing)n(c.csrf);else{var a;a=k;var b;b=/rdx-entity-follow=([^#&]+)/.exec(d.location.search);(b&&2===b.length?b[1]:g)!==a||"undefined"===typeof sessionStorage?a=!1:(b=sessionStorage.followKey,sessionStorage.removeItem("followKey"),a=b===a);
a?q(c.csrf):f(c.csrf)}else v()},error:function(){l("EntityFollowStatusError")}})}var b=e(a.elem()).find(".rdx-follow-button"),t=e(a.elem()).find(".rdx-follow-button-alert"),k=a.prop("entityID"),r=a.prop("entityType"),A=a.prop("followStatusUrl"),x=a.prop("followUrl"),y=a.prop("unfollowUrl"),w=a.prop("flexSignInUrl"),h=a.prop("followText"),p=a.prop("followingText");"undefined"!==typeof k&&"undefined"!==typeof r&&("undefined"===typeof h&&(h="Follow"),"undefined"===typeof p&&(p="Following"),z())})})});
/* ******** */
(function(a){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,c=d?d("SearchEntityWidgetAssets",""):b;c.guardFatal?c.guardFatal(a)(c,window):c.execute(function(){a(c,window)})})(function(a,b,d){a.when("jQuery","rush-framework").register("rdx-entity-paragraph-truncate",function(c,a){a.registerComponent("rdx-entity-paragraph-truncate","rdx-entity-paragraph-truncate",function(a){c(a.elem()).find(".rdx-entity-paragraph").each(function(a,b){a=c(b);b=a.attr("data-a-max-rows");a.css({"line-height":"1.5em",
"max-height":1.5*b+"em"})})})})});
/* ******** */
